# å¤‡ä»½ä»£ç ç™½å±æœ€ç»ˆä¿®å¤æ–¹æ¡ˆ

**æ—¥æœŸ**: 2026-01-21 04:00  
**é—®é¢˜**: è·¯å¾„ä¿®å¤åä»ç„¶ç™½å±  
**æ ¹æœ¬åŸå› **: âœ… **Viteæ„å»ºä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ŒElectron loadFile æ— æ³•åŠ è½½èµ„æº**

---

## ğŸ”´ æ ¹æœ¬åŸå› 

### é—®é¢˜åˆ†æ

**index.html ä¸­çš„èµ„æºå¼•ç”¨**:
```html
<script type="module" crossorigin src="/assets/index-C84F1Ju_.js"></script>
<link rel="stylesheet" crossorigin href="/assets/index-D41K5n2Q.css">
```

**ä¸ºä»€ä¹ˆä¼šç™½å±**:
1. Electron ä½¿ç”¨ `loadFile` åŠ è½½ `file://` åè®®
2. `/assets/...` æ˜¯ç»å¯¹è·¯å¾„ï¼ŒæŒ‡å‘æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•
3. å®é™…æ–‡ä»¶åœ¨ `renderer/dist/assets/`
4. JavaScript å’Œ CSS åŠ è½½å¤±è´¥
5. React åº”ç”¨æ— æ³•å¯åŠ¨ â†’ **ç™½å±**

---

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹ Vite é…ç½®ä½¿ç”¨ç›¸å¯¹è·¯å¾„

**æ–‡ä»¶**: `vite.config.ts`

**æ·»åŠ  `base: './'`**:
```typescript
export default defineConfig({
  plugins: [react()],
  root: './renderer',
  base: './',  // â† æ·»åŠ è¿™ä¸€è¡Œï¼ä½¿ç”¨ç›¸å¯¹è·¯å¾„
  build: {
    outDir: '../renderer/dist',
  },
  // ...
});
```

**æ•ˆæœ**:
- æ„å»ºåçš„ HTML ä¼šä½¿ç”¨ `./assets/...` ç›¸å¯¹è·¯å¾„
- Electron loadFile å¯ä»¥æ­£ç¡®åŠ è½½èµ„æº

---

## ğŸš€ å®Œæ•´ä¿®å¤æ­¥éª¤

### æ­¥éª¤1: å·²ä¿®æ”¹ vite.config.ts

âœ… **å·²å®Œæˆ**: æ·»åŠ äº† `base: './'`

---

### æ­¥éª¤2: é‡æ–°æ„å»º renderer

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm run build:renderer
```

**ç­‰å¾…æ„å»ºå®Œæˆ**ï¼ˆçº¦20-30ç§’ï¼‰

---

### æ­¥éª¤3: é‡æ–°å¯åŠ¨èŠ‚ç‚¹ç«¯

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm start
```

---

## ğŸ“‹ éªŒè¯ä¿®å¤

### æ£€æŸ¥æ„å»ºåçš„ index.html

```powershell
Get-Content "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\renderer\dist\index.html"
```

**åº”è¯¥æ˜¾ç¤º**:
```html
<script type="module" crossorigin src="./assets/index-XXX.js"></script>
<link rel="stylesheet" crossorigin href="./assets/index-XXX.css">
```

**æ³¨æ„**: ç°åœ¨æ˜¯ `./assets` è€Œä¸æ˜¯ `/assets`

---

## ğŸ¯ å¦‚æœè¿˜æ˜¯ç™½å±

### æ‰“å¼€å¼€å‘è€…å·¥å…·æ£€æŸ¥

1. **å¯åŠ¨èŠ‚ç‚¹ç«¯**
2. **æŒ‰ `Ctrl+Shift+I` æ‰“å¼€å¼€å‘è€…å·¥å…·**
3. **æŸ¥çœ‹ Console æ ‡ç­¾**

**æŸ¥æ‰¾é”™è¯¯**:
- æ˜¯å¦æœ‰ "Failed to load resource" é”™è¯¯ï¼Ÿ
- æ˜¯å¦æœ‰ JavaScript é”™è¯¯ï¼Ÿ
- Network æ ‡ç­¾æ˜¾ç¤ºå“ªäº›èµ„æºåŠ è½½å¤±è´¥ï¼Ÿ

---

### æ‰‹åŠ¨æ£€æŸ¥èµ„æºæ–‡ä»¶

```powershell
# æ£€æŸ¥ assets ç›®å½•
Get-ChildItem "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\renderer\dist\assets"
```

**åº”è¯¥çœ‹åˆ°**:
- `index-XXX.js`
- `index-XXX.css`

---

## ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ç›¸å¯¹è·¯å¾„ï¼Ÿ

### Electron loadFile vs HTTP Server

| åŠ è½½æ–¹å¼ | åè®® | è·¯å¾„è§£æ | ç»å¯¹è·¯å¾„ |
|----------|------|----------|----------|
| **loadFile** | `file://` | æ–‡ä»¶ç³»ç»Ÿ | `/` = ç³»ç»Ÿæ ¹ç›®å½• âŒ |
| **loadURL** | `http://` | HTTPæœåŠ¡å™¨ | `/` = æœåŠ¡å™¨æ ¹è·¯å¾„ âœ… |

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `./` â†’ ç›¸å¯¹äºHTMLæ–‡ä»¶ä½ç½® âœ…
- æˆ–è€…ä½¿ç”¨ loadURL + æœ¬åœ°HTTPæœåŠ¡å™¨

---

## ğŸ“Š ä¿®å¤é“¾

### é—®é¢˜1: ç™½å± (è·¯å¾„é—®é¢˜)
- **åŸå› **: `__dirname + ../../` å±‚çº§ä¸è¶³
- **ä¿®å¤**: æ”¹ä¸º `../../../../`
- **ç»“æœ**: âœ… èƒ½åŠ è½½HTMLæ–‡ä»¶

### é—®é¢˜2: ç™½å± (èµ„æºè·¯å¾„é—®é¢˜) â† å½“å‰
- **åŸå› **: Vite ä½¿ç”¨ `/assets/` ç»å¯¹è·¯å¾„
- **ä¿®å¤**: è®¾ç½® `base: './'` ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- **ç»“æœ**: âœ… èµ„æºæ­£ç¡®åŠ è½½ï¼Œåº”ç”¨å¯åŠ¨

---

## âœ… æ€»ç»“

### ä¸¤ä¸ªå…³é”®ä¿®å¤

1. **window-manager.ts** (âœ… å·²å®Œæˆ)
   ```typescript
   const distPath = path.join(__dirname, '../../../../renderer/dist/index.html');
   ```

2. **vite.config.ts** (âœ… å·²å®Œæˆ)
   ```typescript
   base: './',
   ```

### ç°åœ¨éœ€è¦åšçš„

```powershell
# é‡æ–°æ„å»º renderer
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm run build:renderer

# é‡æ–°å¯åŠ¨
npm start
```

---

**é¢„æœŸç»“æœ**: ä¸å†ç™½å±ï¼ç•Œé¢æ­£å¸¸æ˜¾ç¤ºï¼
