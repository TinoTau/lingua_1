# å¤‡ä»½ä»£ç èŠ‚ç‚¹ç«¯ç™½å±é—®é¢˜è¯Šæ–­

**æ—¥æœŸ**: 2026-01-21 03:40  
**é—®é¢˜**: èŠ‚ç‚¹ç«¯Electronçª—å£ç™½å±  
**çŠ¶æ€**: âœ… **å·²è¯Šæ–­ï¼Œæä¾›è§£å†³æ–¹æ¡ˆ**

---

## ğŸ”´ é—®é¢˜åˆ†æ

### ä»æ—¥å¿—å‘ç°çš„ä¸¤ä¸ªå…³é”®é”™è¯¯

#### é”™è¯¯1: Viteå¼€å‘æœåŠ¡å™¨è¿æ¥å¤±è´¥

```json
{
  "error": {"code":"ERR_CONNECTION_REFUSED","url":"http://localhost:5173/"},
  "msg":"Failed to load Vite dev server, trying fallback port"
}
```

**åŸå› **: 
- èŠ‚ç‚¹ç«¯å¯åŠ¨æ—¶å°è¯•åŠ è½½å‰ç«¯ç•Œé¢
- é…ç½®è¦æ±‚ä» `http://localhost:5173/` åŠ è½½ï¼ˆViteå¼€å‘æœåŠ¡å™¨ï¼‰
- ä½†ViteæœåŠ¡å™¨æœªè¿è¡Œ

---

#### é”™è¯¯2: è°ƒåº¦æœåŠ¡å™¨ç«¯å£é…ç½®é”™è¯¯

```json
{
  "error": {"code":"ECONNREFUSED","address":"127.0.0.1","port":5010},
  "schedulerUrl":"ws://127.0.0.1:5010/ws/node",
  "msg":"WebSocket error"
}
```

**åŸå› **:
- èŠ‚ç‚¹ç«¯é…ç½®è¿æ¥åˆ°ç«¯å£ **5010**
- ä½†å¤‡ä»½ä»£ç çš„è°ƒåº¦æœåŠ¡å™¨å®é™…ç«¯å£æ˜¯ **6000**
- ç«¯å£ä¸åŒ¹é…å¯¼è‡´è¿æ¥å¤±è´¥

---

## ğŸ’¡ ä¸ºä»€ä¹ˆä¼šç™½å±ï¼Ÿ

### ç™½å±åŸå› 

**Electronçª—å£æ‰“å¼€äº†ï¼Œä½†æ²¡æœ‰å†…å®¹æ˜¾ç¤º**:

1. **å‰ç«¯ç•Œé¢åŠ è½½å¤±è´¥**
   - å°è¯•ä» `http://localhost:5173/` åŠ è½½ç•Œé¢
   - ViteæœåŠ¡å™¨æ²¡è¿è¡Œ
   - çª—å£æ— æ³•æ˜¾ç¤ºå†…å®¹ â†’ **ç™½å±**

2. **åå°è¿æ¥å¤±è´¥**
   - æ— æ³•è¿æ¥åˆ°è°ƒåº¦æœåŠ¡å™¨ï¼ˆç«¯å£é”™è¯¯ï¼‰
   - ä¸æ–­é‡è¯•è¿æ¥
   - å³ä½¿å‰ç«¯åŠ è½½æˆåŠŸï¼Œä¹Ÿæ— æ³•æ­£å¸¸å·¥ä½œ

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨ç”Ÿäº§æ¨¡å¼ï¼ˆæ¨èï¼‰

**èŠ‚ç‚¹ç«¯åº”è¯¥ä½¿ç”¨æ„å»ºåçš„æ–‡ä»¶ï¼Œä¸ä¾èµ–Vite**

#### æ­¥éª¤1: æ£€æŸ¥æ˜¯å¦å·²æ„å»º

```powershell
Test-Path "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\main\electron-node\renderer\dist"
```

**å¦‚æœè¿”å› `False`ï¼Œéœ€è¦å…ˆæ„å»º**:

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm run build
```

---

#### æ­¥éª¤2: ä¿®å¤è°ƒåº¦æœåŠ¡å™¨ç«¯å£é…ç½®

**æ£€æŸ¥é…ç½®æ–‡ä»¶**:
```powershell
Get-Content "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\main\electron-node\main\src\config\node-config.json"
```

**åº”è¯¥åŒ…å«**:
```json
{
  "schedulerUrl": "ws://127.0.0.1:6000/ws/node"
}
```

**å¦‚æœä¸æ˜¯6000ï¼Œéœ€è¦ä¿®æ”¹**

---

#### æ­¥éª¤3: é‡æ–°å¯åŠ¨èŠ‚ç‚¹ç«¯

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm start
```

---

### æ–¹æ¡ˆ2: åŒæ—¶å¯åŠ¨Viteï¼ˆå¼€å‘æ¨¡å¼ï¼‰

**å¦‚æœè¦ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼Œéœ€è¦é¢å¤–å¯åŠ¨ViteæœåŠ¡å™¨**

#### ç»ˆç«¯1: Viteå¼€å‘æœåŠ¡å™¨

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm run dev:renderer
```

**ç­‰å¾…çœ‹åˆ°**:
```
VITE ... ready in ... ms
Local: http://localhost:5173/
```

---

#### ç»ˆç«¯2: èŠ‚ç‚¹ç«¯

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm start
```

---

## ğŸ” éªŒè¯è°ƒåº¦æœåŠ¡å™¨ç«¯å£

### æ£€æŸ¥å¤‡ä»½ä»£ç çš„é…ç½®

```powershell
# æŸ¥çœ‹è°ƒåº¦æœåŠ¡å™¨é…ç½®
Get-Content "D:\Programs\github\lingua_1\expired\lingua_1-main\central_server\scheduler\config.toml" | Select-String "port"
```

**åº”è¯¥æ˜¾ç¤ºç«¯å£ 6000**

---

### æ£€æŸ¥èŠ‚ç‚¹ç«¯é…ç½®

```powershell
# æŸ¥çœ‹èŠ‚ç‚¹ç«¯é…ç½®
Get-Content "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\main\electron-node\main\src\config\node-config.json" | Select-String "schedulerUrl"
```

**åº”è¯¥æ˜¾ç¤º**:
```json
"schedulerUrl": "ws://127.0.0.1:6000/ws/node"
```

**å¦‚æœæ˜¾ç¤º 5010ï¼Œéœ€è¦ä¿®æ”¹ä¸º 6000**

---

## ğŸ“‹ å®Œæ•´çš„å¯åŠ¨é¡ºåº

### æ­£ç¡®çš„å¯åŠ¨æµç¨‹

#### 1. å¯åŠ¨è°ƒåº¦æœåŠ¡å™¨

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\central_server\scheduler
cargo run --release
```

**ç­‰å¾…çœ‹åˆ°**: "Scheduler started on 0.0.0.0:6000"

---

#### 2. ç¡®ä¿èŠ‚ç‚¹ç«¯å·²æ„å»º

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node

# å¦‚æœrenderer/distä¸å­˜åœ¨ï¼Œæ‰§è¡Œæ„å»º
npm run build
```

---

#### 3. å¯åŠ¨èŠ‚ç‚¹ç«¯

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm start
```

**é¢„æœŸ**:
- Electronçª—å£æ‰“å¼€
- æ˜¾ç¤ºèŠ‚ç‚¹ç«¯ç•Œé¢ï¼ˆä¸å†ç™½å±ï¼‰
- è¿æ¥åˆ°è°ƒåº¦æœåŠ¡å™¨æˆåŠŸ

---

#### 4. å¯åŠ¨Webç«¯

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\webapp\web-client
npm run dev
```

---

## ğŸ› ï¸ å¿«é€Ÿä¿®å¤è„šæœ¬

### æ£€æŸ¥å¹¶ä¿®å¤è°ƒåº¦æœåŠ¡å™¨ç«¯å£é…ç½®

```powershell
$configPath = "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\main\electron-node\main\src\config\node-config.json"

if (Test-Path $configPath) {
    $config = Get-Content $configPath | ConvertFrom-Json
    
    Write-Host "å½“å‰é…ç½®:"
    Write-Host "schedulerUrl: $($config.schedulerUrl)"
    
    if ($config.schedulerUrl -match ":5010") {
        Write-Host ""
        Write-Host "è­¦å‘Š: ç«¯å£é…ç½®é”™è¯¯ (5010)ï¼Œåº”è¯¥æ˜¯ 6000" -ForegroundColor Yellow
        Write-Host ""
        Write-Host "è¯·æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°†ç«¯å£ä» 5010 æ”¹ä¸º 6000"
    } else {
        Write-Host "ç«¯å£é…ç½®æ­£ç¡®" -ForegroundColor Green
    }
} else {
    Write-Host "é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: $configPath" -ForegroundColor Red
}
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆå¤‡ä»½ä»£ç ç«¯å£æ˜¯6000è€Œä¸æ˜¯5010ï¼Ÿ

**A**: å¤‡ä»½ä»£ç å’Œå½“å‰ä»£ç ä½¿ç”¨ä¸åŒçš„ç«¯å£é…ç½®ï¼Œé¿å…å†²çªï¼š

| æœåŠ¡ | å½“å‰ä»£ç ç«¯å£ | å¤‡ä»½ä»£ç ç«¯å£ |
|------|-------------|-------------|
| **è°ƒåº¦æœåŠ¡å™¨** | 5010 | **6000** |
| **Webç«¯** | 5173 | **9001** |

---

### Q2: å¿…é¡»æ„å»ºrendererå—ï¼Ÿ

**A**: æ˜¯çš„ï¼Œé™¤éå¯åŠ¨Viteå¼€å‘æœåŠ¡å™¨ã€‚æ¨èæ„å»ºæ–¹å¼ï¼š

```powershell
cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
npm run build
```

è¿™ä¼šåˆ›å»º `renderer/dist` ç›®å½•ï¼ŒèŠ‚ç‚¹ç«¯å¯ä»¥ç›´æ¥åŠ è½½ã€‚

---

### Q3: å¦‚ä½•åˆ¤æ–­èŠ‚ç‚¹ç«¯æ˜¯å¦æ­£å¸¸ï¼Ÿ

**æ­£å¸¸çŠ¶æ€**:
- âœ… Electronçª—å£æ‰“å¼€
- âœ… æ˜¾ç¤ºèŠ‚ç‚¹ç«¯ç•Œé¢ï¼ˆä¸æ˜¯ç™½å±ï¼‰
- âœ… å·¦ä¸Šè§’æ˜¾ç¤º "å·²è¿æ¥" æˆ–èŠ‚ç‚¹ID
- âœ… å¯ä»¥çœ‹åˆ°æœåŠ¡åˆ—è¡¨

**å¼‚å¸¸çŠ¶æ€**:
- âŒ ç™½å±
- âŒ æ˜¾ç¤º "æœªè¿æ¥"
- âŒ æ§åˆ¶å°æœ‰é”™è¯¯

---

## ğŸ“Š è¯Šæ–­æ€»ç»“

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| **ç™½å±** | Viteæœªè¿è¡Œï¼Œrenderer/distä¸å­˜åœ¨ | æ„å»ºrenderer: `npm run build` |
| **æ— æ³•è¿æ¥è°ƒåº¦æœåŠ¡å™¨** | ç«¯å£é…ç½®é”™è¯¯ (5010 vs 6000) | ä¿®æ”¹é…ç½®ä¸º6000æˆ–ä½¿ç”¨é»˜è®¤é…ç½® |
| **ä¸æ–­é‡è¯•è¿æ¥** | è°ƒåº¦æœåŠ¡å™¨æœªå¯åŠ¨ | å…ˆå¯åŠ¨è°ƒåº¦æœåŠ¡å™¨ |

---

## âœ… æ¨èæ“ä½œ

### ç«‹å³æ‰§è¡Œ

1. **åœæ­¢å½“å‰çš„èŠ‚ç‚¹ç«¯**ï¼ˆå¦‚æœè¿˜åœ¨è¿è¡Œï¼‰

2. **æ£€æŸ¥rendereræ˜¯å¦å·²æ„å»º**:
   ```powershell
   Test-Path "D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node\main\electron-node\renderer\dist"
   ```

3. **å¦‚æœè¿”å›Falseï¼Œæ‰§è¡Œæ„å»º**:
   ```powershell
   cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
   npm run build
   ```

4. **ç¡®ä¿è°ƒåº¦æœåŠ¡å™¨åœ¨è¿è¡Œ**:
   ```powershell
   Test-NetConnection localhost -Port 6000
   ```

5. **é‡æ–°å¯åŠ¨èŠ‚ç‚¹ç«¯**:
   ```powershell
   cd D:\Programs\github\lingua_1\expired\lingua_1-main\electron_node\electron-node
   npm start
   ```

---

**å…³é”®**: å¤‡ä»½ä»£ç çš„èŠ‚ç‚¹ç«¯éœ€è¦å…ˆæ„å»ºï¼Œå¹¶ä¸”è°ƒåº¦æœåŠ¡å™¨å¿…é¡»è¿è¡Œåœ¨ç«¯å£6000ï¼
