# Web 客户端文档

## 主文档

- **[Web 端实时语音翻译统一设计方案 v3](./Web_端实时语音翻译_统一设计方案_v3.md)** - **主文档，包含完整的设计方案、技术方案和功能需求**

## 参考文档（历史版本）

> ⚠️ **注意**: 以下文档为历史版本，已整合到 v3 统一设计方案中，保留作为参考。

- [Web 端实时语音翻译技术方案](./Web_端实时语音翻译_技术方案_TechSpec.md) - 技术方案（已整合到 v3）
- [Web 端实时语音翻译功能需求说明](./Web_端实时语音翻译_功能需求说明_FRD.md) - 功能需求（已整合到 v3）
- [Web 端半双工实时语音翻译交互与上下文拼接设计说明 v2](./Web_端半双工实时语音翻译交互与上下文拼接设计说明_v2.md) - 交互设计（已整合到 v3）
- [Web 客户端方案可行性分析](./WEB_CLIENT_SCHEME_FEASIBILITY_ANALYSIS.md) - 可行性分析

## 快速开始

请直接阅读 [Web 端实时语音翻译统一设计方案 v3](./Web_端实时语音翻译_统一设计方案_v3.md) 了解完整的设计方案。

## Utterance Group 功能文档

Utterance Group 是最高优先级功能，完整文档如下：

- **[UTTERANCE_GROUP.md](./UTTERANCE_GROUP.md)** ⭐ **完整文档（规范 + 实施状态 + 可行性评估）**
  - 包含完整的技术规范、实施详情、测试结果和可行性评估
  - 版本：v1.1
  - 状态：所有组件已完成 ✅

## 会话模式功能文档

会话模式改造已完成，支持持续监听和多次发送：

- **[按钮控制机制分析报告](../webRTC/BUTTON_CONTROL_MECHANISM_ANALYSIS.md)** ⭐ **完整文档（分析 + 实施状态 + 测试结果）**
  - 包含需求分析、实施详情、测试结果
  - 状态：已完成 ✅
  - 测试：20 个测试用例全部通过 ✅
  - 主要功能：
    - ✅ 会话模式：开始会话后持续监听，可以多次发送
    - ✅ 发送按钮：发送当前话语，但继续监听（不停止录音）
    - ✅ 结束按钮：结束整个会话
    - ✅ 状态管理：播放完成后自动回到录音状态（会话模式）
    - ✅ **双向模式（面对面模式）**：支持自动语言检测和双向翻译
      - ✅ 单向模式：指定源语言和目标语言
      - ✅ 双向模式：指定两种语言，系统自动检测说话语言并翻译
      - ✅ 适用于面对面对话场景（同一设备，两人对话）
      - ✅ **单元测试**: 14个测试，全部通过 ✅
        - ✅ 连接逻辑测试（3个测试）
        - ✅ 语言配置测试（4个测试）
        - ✅ 功能标志传递测试（2个测试）
        - ✅ 消息格式验证测试（2个测试）
        - ✅ 模式对比测试（1个测试）
        - ✅ 边界情况测试（2个测试）

## 会议室模式功能文档

会议室模式功能已完成，支持多人会议翻译和原声传递：

- **[原声传递带宽优化策略](../webRTC/RAW_VOICE_BANDWIDTH_OPTIMIZATION.md)** ⭐ **完整文档（架构说明 + 优化策略 + 实现细节）**
  - 包含架构说明、带宽优化策略、实现细节
  - 状态：已完成 ✅
  - 测试：12 个测试用例全部通过 ✅
  - 主要功能：
    - ✅ 房间管理：创建、加入、退出会议室
    - ✅ 成员管理：显示成员列表和偏好设置
    - ✅ 多语言翻译：为每个不同语言创建独立翻译任务
    - ✅ 原声传递：P2P WebRTC 连接传输原声
    - ✅ 选择性接收：每个成员可以选择是否接收其他成员的原声
    - ✅ 实时切换：偏好设置可以实时切换，立即生效
    - ✅ 带宽优化：不接收原声时不建立连接，节省带宽
    - ✅ 成员加入方式：
      - 第一个成员：通过创建会议室进入（自动成为第一个成员）
      - 其他成员：通过 6 位数房间码进入
      - 暂时不考虑邀请方式
    - ✅ **WebRTC P2P 连接**：自动建立和管理多个成员的 WebRTC 连接
    - ✅ **音频混控**：混合原声和翻译音频，支持淡入淡出效果
      - 原声通道：来自 WebRTC 的远程音频流
      - 翻译通道：来自服务器的翻译音频
      - 自动切换：翻译音频到达时淡出原声，播放结束后恢复原声

### 相关文档

- [会议室成员加入流程](../webRTC/ROOM_MEMBER_JOIN_FLOW.md) - 详细的成员加入流程说明
- [面对面模式（双向模式）功能文档](./FACE_TO_FACE_MODE.md) - 双向模式的详细功能说明和技术实现
- **[WebRTC 音频混控实现文档](../webRTC/WEBRTC_AUDIO_MIXER_IMPLEMENTATION.md)** ⭐ **WebRTC 连接和音频混控的完整实现文档**
  - 包含 WebRTC P2P 连接建立和管理
  - 音频混控器实现细节
  - 淡入淡出效果实现
  - 使用示例和技术细节

## 关键决策

根据 v3 方案，以下为关键决策：

1. **跳过播放按钮不是必须，也不做 v1 功能**
2. **ASR 字幕是必须功能**
3. **Utterance Group & 上下文拼接为最高优先级** ✅ **已完成**
4. **静音阈值不可由用户配置（避免复杂度）**
5. **iOS 相关内容从文档中移除或降级为未来考虑**

