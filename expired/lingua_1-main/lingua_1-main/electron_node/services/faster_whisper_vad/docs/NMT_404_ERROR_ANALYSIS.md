# NMTæœåŠ¡404é”™è¯¯åˆ†ææŠ¥å‘Š

**æ—¥æœŸ**: 2025-12-25  
**é—®é¢˜**: job-556E716C (trace_id=dff4fb04-7c98-4b61-a983-faa35f6f9842) å¤„ç†å¤±è´¥  
**çŠ¶æ€**: ğŸ” **é—®é¢˜å·²å®šä½**

---

## é”™è¯¯ç°è±¡

### è°ƒåº¦æœåŠ¡å™¨æ—¥å¿—
```
ERROR Job processing failed trace_id=dff4fb04-7c98-4b61-a983-faa35f6f9842 job_id=job-556E716C session_id=s-BAFEA97F
```

### èŠ‚ç‚¹ç«¯æ—¥å¿—

#### 1. faster-whisper-vad è¯·æ±‚æˆåŠŸ âœ…
```json
{
  "level": 30,
  "serviceId": "faster-whisper-vad",
  "requestUrl": "http://127.0.0.1:6007/utterance",
  "status": 200,
  "jobId": "job-4C2EE9CF",
  "msg": "faster-whisper-vad request succeeded"
}
```

**ASRè¯†åˆ«ç»“æœ**: "å¨‰æ›ç•¾æµœå“„ï¼‹ å¨‰æ›ç•¾æµœå“„ï¼‹ å¨‰æ›ç•¾æµœå“„ï¼‹"

#### 2. NMT ä»»åŠ¡å¤±è´¥ âŒ
```json
{
  "level": 50,
  "error": {
    "message": "Request failed with status code 404",
    "name": "AxiosError",
    "config": {
      "baseURL": "http://127.0.0.1:5008",
      "method": "post",
      "url": "/v1/nmt/translate",
      "data": "{\"text\":\"å¨‰æ›ç•¾æµœå“„ï¼‹ å¨‰æ›ç•¾æµœå“„ï¼‹ å¨‰æ›ç•¾æµœå“„ï¼‹\",\"src_lang\":\"zh\",\"tgt_lang\":\"en\",\"context_text\":\"å¨‰æ›ç•¾æµœå“„ï¼‹ å¨‰æ›ç•¾æµœå“„ï¼‹ å¨‰æ›ç•¾æµœå“„ï¼‹\"}"
    },
    "status": 404
  },
  "serviceId": "nmt-m2m100",
  "msg": "NMT task failed"
}
```

---

## é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 

**faster-whisper-vadæœåŠ¡å·¥ä½œæ­£å¸¸**ï¼Œé—®é¢˜å‡ºåœ¨**NMTæœåŠ¡**ï¼š

1. **ASRé˜¶æ®µæˆåŠŸ**ï¼š
   - faster-whisper-vad æˆåŠŸè§£ç  Opus packetsï¼ˆPlan Aæ ¼å¼ï¼‰
   - æˆåŠŸè¯†åˆ«æ–‡æœ¬
   - è¿”å› 200 OK

2. **NMTé˜¶æ®µå¤±è´¥**ï¼š
   - èŠ‚ç‚¹ç«¯è¯·æ±‚ `http://127.0.0.1:5008/v1/nmt/translate`
   - NMTæœåŠ¡è¿”å› 404 Not Found
   - å¯¼è‡´æ•´ä¸ªpipelineå¤±è´¥

### å¯èƒ½çš„åŸå› 

1. **NMTæœåŠ¡ç«¯ç‚¹è·¯å¾„ä¸æ­£ç¡®**ï¼š
   - èŠ‚ç‚¹ç«¯è¯·æ±‚: `/v1/nmt/translate`
   - å®é™…ç«¯ç‚¹å¯èƒ½æ˜¯: `/translate` æˆ–å…¶ä»–è·¯å¾„

2. **NMTæœåŠ¡æœªæ­£ç¡®å¯åŠ¨**ï¼š
   - æœåŠ¡å¯èƒ½æœªå¯åŠ¨æˆ–å·²åœæ­¢
   - ç«¯å£5008å¯èƒ½è¢«å ç”¨æˆ–æœåŠ¡æœªç›‘å¬

3. **NMTæœåŠ¡APIç‰ˆæœ¬ä¸åŒ¹é…**ï¼š
   - èŠ‚ç‚¹ç«¯ä½¿ç”¨ `/v1/nmt/translate`
   - æœåŠ¡ç«¯å¯èƒ½ä½¿ç”¨ä¸åŒçš„APIç‰ˆæœ¬

---

## è§£å†³æ–¹æ¡ˆ

### 1. æ£€æŸ¥NMTæœåŠ¡ç«¯ç‚¹é…ç½®

éœ€è¦ç¡®è®¤ï¼š
- NMTæœåŠ¡çš„å®é™…ç«¯ç‚¹è·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ
- èŠ‚ç‚¹ç«¯çš„ `routeNMTTask` æ–¹æ³•ä½¿ç”¨çš„URLæ˜¯å¦æ­£ç¡®ï¼Ÿ

### 2. æ£€æŸ¥NMTæœåŠ¡çŠ¶æ€

éœ€è¦ç¡®è®¤ï¼š
- NMTæœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Ÿ
- ç«¯å£5008æ˜¯å¦å¯è®¿é—®ï¼Ÿ
- æœåŠ¡æ—¥å¿—ä¸­æ˜¯å¦æœ‰ç›¸å…³é”™è¯¯ï¼Ÿ

### 3. ä¿®å¤ç«¯ç‚¹è·¯å¾„

å¦‚æœç«¯ç‚¹è·¯å¾„ä¸åŒ¹é…ï¼Œéœ€è¦ï¼š
- ä¿®æ”¹èŠ‚ç‚¹ç«¯çš„ `routeNMTTask` æ–¹æ³•
- æˆ–ä¿®æ”¹NMTæœåŠ¡çš„ç«¯ç‚¹å®šä¹‰
- ç¡®ä¿ä¸¤è€…ä¸€è‡´

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… **å·²å®Œæˆ**: ç¡®è®¤faster-whisper-vadæœåŠ¡å·¥ä½œæ­£å¸¸
2. ğŸ” **è¿›è¡Œä¸­**: æ£€æŸ¥NMTæœåŠ¡çš„ç«¯ç‚¹é…ç½®
3. â³ **å¾…å¤„ç†**: ä¿®å¤NMTæœåŠ¡çš„404é”™è¯¯
4. â³ **å¾…å¤„ç†**: é‡æ–°æµ‹è¯•å®Œæ•´çš„pipeline

---

## ç›¸å…³æ–‡ä»¶

- `electron_node/electron-node/main/src/task-router/task-router.ts` - èŠ‚ç‚¹ç«¯ä»»åŠ¡è·¯ç”±
- `electron_node/services/nmt_m2m100/` - NMTæœåŠ¡ä»£ç 
- `electron_node/electron-node/logs/electron-main.log` - èŠ‚ç‚¹ç«¯æ—¥å¿—

