# VADåˆ‡ç‰‡ä¿®å¤æ–¹æ¡ˆå·¥ä½œåŸç†è¯¦è§£

## é—®é¢˜å›é¡¾

**é—®é¢˜ç°è±¡**ï¼š
- æ’­æ”¾ç¬¬ä¸€ä¸ªç¿»è¯‘ç»“æœåï¼Œåç»­ç”¨æˆ·è¯­éŸ³è¢«åˆ‡åˆ†æˆæçŸ­çš„éŸ³é¢‘å—ï¼ˆ0.26ç§’-4.1ç§’ï¼‰
- ç¬¬ä¸€æ¬¡è¾“å…¥ï¼ˆåœ¨è¿”å›ç»“æœä¹‹å‰ï¼‰çš„éŸ³é¢‘å®Œæ•´ï¼ˆ5.64ç§’-15.88ç§’ï¼‰

**æ ¹æœ¬åŸå› **ï¼š
1. TTSæ’­æ”¾æ—¶å½•éŸ³å™¨è¢«åœæ­¢
2. æ’­æ”¾å®Œæˆåï¼Œå½•éŸ³å™¨æ¢å¤æœ‰100mså›ºå®šå»¶è¿Ÿ
3. å½•éŸ³å™¨æ¢å¤æ—¶ï¼ŒVADçŠ¶æ€è¢«é‡ç½®ï¼Œéœ€è¦é‡æ–°"æ”»å‡»"ï¼ˆ300mså»¶è¿Ÿï¼‰
4. ç”¨æˆ·è¯´è¯çš„å‰300msè¢«ä¸¢å¼ƒï¼Œå¯¼è‡´éŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—

---

## æ–¹æ¡ˆä¸€ï¼šäº‹ä»¶é©±åŠ¨æ¢å¤å½•éŸ³

### å½“å‰é—®é¢˜

**ç°æœ‰å®ç°**ï¼ˆ`app.ts:1092-1100`ï¼‰ï¼š
```typescript
setTimeout(() => {
  this.recorder.start().then(() => {
    console.log('[App] âœ… æ’­æ”¾å®Œæˆåå·²æ¢å¤å½•éŸ³');
  });
}, 200);  // âš ï¸ å›ºå®š200mså»¶è¿Ÿ
```

**é—®é¢˜**ï¼š
- ä½¿ç”¨å›ºå®šçš„`setTimeout`å»¶è¿Ÿï¼ˆ200msï¼‰
- å»¶è¿Ÿæ˜¯**çŒœæµ‹æ€§çš„**ï¼Œä¸å‡†ç¡®
- å¦‚æœç”¨æˆ·åœ¨è¿™200mså†…å¼€å§‹è¯´è¯ï¼ŒéŸ³é¢‘å¸§ä¼šè¢«ä¸¢å¼ƒï¼ˆ`isRecording = false`ï¼‰

### ä¿®å¤æ–¹æ¡ˆ

**æ–°å®ç°**ï¼š
```typescript
private onPlaybackFinished(): void {
  // ... å…¶ä»–é€»è¾‘ ...
  
  // ä½¿ç”¨äº‹ä»¶é©±åŠ¨ + requestAnimationFrame ç¡®ä¿çŠ¶æ€è½¬æ¢å®Œæˆ
  requestAnimationFrame(() => {
    // çŠ¶æ€è½¬æ¢å·²å®Œæˆï¼Œç«‹å³æ¢å¤å½•éŸ³å™¨
    if (this.sessionManager.getIsSessionActive() && 
        this.stateMachine.getState() === SessionState.INPUT_RECORDING && 
        !this.recorder.getIsRecording()) {
      this.recorder.start().then(() => {
        console.log('[App] âœ… æ’­æ”¾å®Œæˆåå·²æ¢å¤å½•éŸ³ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰');
      });
    }
  });
  
  // å¯é€‰ï¼š30-50ms fallback timeout ä½œä¸ºå…œåº•
  setTimeout(() => {
    if (!this.recorder.getIsRecording()) {
      console.warn('[App] âš ï¸ äº‹ä»¶é©±åŠ¨æ¢å¤å¤±è´¥ï¼Œä½¿ç”¨fallback');
      this.recorder.start();
    }
  }, 50);
}
```

### å·¥ä½œåŸç†

1. **äº‹ä»¶é©±åŠ¨**ï¼š
   - åœ¨`onPlaybackFinished`å›è°ƒä¸­ç›´æ¥è§¦å‘æ¢å¤
   - ä¸ç­‰å¾…å›ºå®šæ—¶é—´ï¼Œè€Œæ˜¯ç­‰å¾…**å®é™…äº‹ä»¶**ï¼ˆæ’­æ”¾å®Œæˆï¼‰

2. **requestAnimationFrame**ï¼š
   - ç¡®ä¿çŠ¶æ€æœºçŠ¶æ€è½¬æ¢å®Œæˆï¼ˆ`PLAYING_TTS` â†’ `INPUT_RECORDING`ï¼‰
   - æµè§ˆå™¨ä¼šåœ¨ä¸‹ä¸€å¸§æ¸²æŸ“å‰æ‰§è¡Œï¼Œé€šå¸¸åªéœ€è¦16msï¼ˆ60fpsï¼‰

3. **Fallbackæœºåˆ¶**ï¼š
   - 30-50msçš„å…œåº•timeout
   - å¦‚æœäº‹ä»¶é©±åŠ¨å¤±è´¥ï¼Œç¡®ä¿å½•éŸ³å™¨ä»èƒ½æ¢å¤

### ä¿®å¤æ•ˆæœ

**ä¿®å¤å‰**ï¼š
- å›ºå®š200mså»¶è¿Ÿ
- ç”¨æˆ·è¯´è¯çš„å‰200mså¯èƒ½è¢«ä¸¢å¤±

**ä¿®å¤å**ï¼š
- å»¶è¿Ÿå‡å°‘åˆ°16-50msï¼ˆ`requestAnimationFrame` + fallbackï¼‰
- ç”¨æˆ·è¯´è¯çš„å‰16-50mså¯èƒ½è¢«ä¸¢å¤±ï¼ˆå‡å°‘75-92%ï¼‰

**å…³é”®æ”¹è¿›**ï¼š
- âœ… å»¶è¿Ÿä»200mså‡å°‘åˆ°16-50ms
- âœ… ä»"çŒœæµ‹æ€§å»¶è¿Ÿ"å˜ä¸º"äº‹ä»¶é©±åŠ¨"
- âœ… ç”¨æˆ·è¯´è¯çš„å‰200mså¯èƒ½è¢«ä¸¢å¤± â†’ å‰16-50mså¯èƒ½è¢«ä¸¢å¤±

---

## æ–¹æ¡ˆäºŒï¼šæ™ºèƒ½VADçŠ¶æ€æ¢å¤

### å½“å‰é—®é¢˜

**ç°æœ‰å®ç°**ï¼ˆ`recorder.ts:190-196`ï¼‰ï¼š
```typescript
async start(): Promise<void> {
  // ...
  this.isRecording = true;
  // é‡ç½®é™éŸ³è¿‡æ»¤çŠ¶æ€
  this.consecutiveVoiceFrames = 0;
  this.consecutiveSilenceFrames = 0;
  this.isSendingAudio = false;  // âš ï¸ æ€»æ˜¯é‡ç½®VADçŠ¶æ€
  // ...
}
```

**é—®é¢˜**ï¼š
- æ— è®ºåœæ­¢æ—¶é—´å¤šé•¿ï¼Œæ€»æ˜¯é‡ç½®`isSendingAudio = false`
- ç”¨æˆ·è¯´è¯æ—¶ï¼ŒVADéœ€è¦é‡æ–°"æ”»å‡»"ï¼ˆè¿ç»­3å¸§ = 300msï¼‰æ‰èƒ½å¼€å§‹å‘é€
- ç”¨æˆ·è¯´è¯çš„å‰300msè¢«ä¸¢å¼ƒ

**VADæ”»å‡»æœºåˆ¶**ï¼ˆ`recorder.ts:284-291`ï¼‰ï¼š
```typescript
if (!this.isSendingAudio && this.consecutiveVoiceFrames >= this.silenceFilterConfig.attackFrames) {
  this.isSendingAudio = true;  // éœ€è¦è¿ç»­3å¸§ï¼ˆ300msï¼‰æ‰èƒ½å¼€å§‹å‘é€
  console.log('[VAD] âœ… æ£€æµ‹åˆ°è¯­éŸ³ï¼Œå¼€å§‹å‘é€éŸ³é¢‘');
}
```

### ä¿®å¤æ–¹æ¡ˆ

**æ–°å®ç°**ï¼š
```typescript
// åœ¨ recorder.ts ä¸­æ·»åŠ 
private stopTimestamp: number | null = null;

stop(): void {
  // ...
  this.isRecording = false;
  this.stopTimestamp = Date.now();  // âœ… è®°å½•åœæ­¢æ—¶é—´æˆ³
  // é‡ç½®é™éŸ³è¿‡æ»¤çŠ¶æ€
  this.consecutiveVoiceFrames = 0;
  this.consecutiveSilenceFrames = 0;
  this.isSendingAudio = false;
  // ...
}

async start(): Promise<void> {
  // ...
  this.isRecording = true;
  
  // âœ… æ™ºèƒ½VADçŠ¶æ€æ¢å¤
  const stopDuration = this.stopTimestamp ? Date.now() - this.stopTimestamp : Infinity;
  
  if (stopDuration < 1000) {
    // åœæ­¢æ—¶é—´ < 1ç§’ï¼šä¿æŒVADçŠ¶æ€ï¼ˆé¿å…é‡æ–°æ”»å‡»ï¼‰
    // ä¸é‡ç½® isSendingAudioï¼Œä¿æŒä¹‹å‰çš„çŠ¶æ€
    console.log('[Recorder] çŸ­æœŸåœæ­¢ï¼Œä¿æŒVADçŠ¶æ€', { stopDuration });
  } else {
    // åœæ­¢æ—¶é—´ >= 1ç§’ï¼šé‡ç½®VADçŠ¶æ€ï¼ˆé¿å…çŠ¶æ€ä¸å‡†ç¡®ï¼‰
    this.isSendingAudio = false;
    console.log('[Recorder] é•¿æœŸåœæ­¢ï¼Œé‡ç½®VADçŠ¶æ€', { stopDuration });
  }
  
  // æ— è®ºå“ªç§æƒ…å†µï¼Œå§‹ç»ˆé‡ç½®è®¡æ•°å™¨
  this.consecutiveVoiceFrames = 0;
  this.consecutiveSilenceFrames = 0;
  this.stopTimestamp = null;
  // ...
}
```

### å·¥ä½œåŸç†

1. **è®°å½•åœæ­¢æ—¶é—´**ï¼š
   - åœ¨`stop()`æ—¶è®°å½•æ—¶é—´æˆ³ï¼š`this.stopTimestamp = Date.now()`

2. **è®¡ç®—åœæ­¢æ—¶é•¿**ï¼š
   - åœ¨`start()`æ—¶è®¡ç®—ï¼š`stopDuration = Date.now() - this.stopTimestamp`

3. **æ™ºèƒ½åˆ¤æ–­**ï¼š
   - **åœæ­¢æ—¶é—´ < 1ç§’**ï¼ˆçŸ­æœŸåœæ­¢ï¼Œå¦‚TTSæ’­æ”¾ï¼‰ï¼š
     - ä¿æŒ`isSendingAudio`çŠ¶æ€ï¼ˆä¸é‡ç½®ï¼‰
     - ç”¨æˆ·è¯´è¯æ—¶ï¼ŒVAD**ä¸éœ€è¦é‡æ–°æ”»å‡»**ï¼Œå¯ä»¥ç«‹å³å¼€å§‹å‘é€
   - **åœæ­¢æ—¶é—´ >= 1ç§’**ï¼ˆé•¿æœŸåœæ­¢ï¼‰ï¼š
     - é‡ç½®`isSendingAudio = false`
     - ç”¨æˆ·è¯´è¯æ—¶ï¼ŒVADéœ€è¦é‡æ–°æ”»å‡»ï¼ˆ300mså»¶è¿Ÿï¼‰
     - ä½†è¿™æ˜¯åˆç†çš„ï¼Œå› ä¸ºé•¿æœŸåœæ­¢åç¯å¢ƒå¯èƒ½å·²æ”¹å˜

4. **å§‹ç»ˆé‡ç½®è®¡æ•°å™¨**ï¼š
   - æ— è®ºå“ªç§æƒ…å†µï¼Œéƒ½é‡ç½®`consecutiveVoiceFrames`å’Œ`consecutiveSilenceFrames`
   - é¿å…è®¡æ•°å™¨ç´¯ç§¯å¯¼è‡´è¯¯åˆ¤

### ä¿®å¤æ•ˆæœ

**ä¿®å¤å‰**ï¼š
- æ€»æ˜¯é‡ç½®`isSendingAudio = false`
- ç”¨æˆ·è¯´è¯æ—¶ï¼ŒVADéœ€è¦300msæ”»å‡»å»¶è¿Ÿ
- ç”¨æˆ·è¯´è¯çš„å‰300msè¢«ä¸¢å¼ƒ

**ä¿®å¤å**ï¼š
- **çŸ­æœŸåœæ­¢ï¼ˆ<1ç§’ï¼‰**ï¼šä¿æŒ`isSendingAudio`çŠ¶æ€
- ç”¨æˆ·è¯´è¯æ—¶ï¼ŒVAD**ä¸éœ€è¦æ”»å‡»å»¶è¿Ÿ**ï¼Œå¯ä»¥ç«‹å³å¼€å§‹å‘é€
- ç”¨æˆ·è¯´è¯çš„å‰300ms**ä¸å†è¢«ä¸¢å¼ƒ**

**å…³é”®æ”¹è¿›**ï¼š
- âœ… çŸ­æœŸåœæ­¢æ—¶ï¼Œæ¶ˆé™¤300msæ”»å‡»å»¶è¿Ÿ
- âœ… ç”¨æˆ·è¯´è¯çš„å‰300msä¸å†è¢«ä¸¢å¼ƒ
- âœ… é•¿æœŸåœæ­¢æ—¶ï¼Œä»ç„¶é‡ç½®çŠ¶æ€ï¼Œé¿å…çŠ¶æ€ä¸å‡†ç¡®

---

## æ–¹æ¡ˆä¸‰ï¼šæ¢å¤ä¿æŠ¤çª—å£

### å½“å‰é—®é¢˜

**VADé‡Šæ”¾æœºåˆ¶**ï¼ˆ`recorder.ts:311-319`ï¼‰ï¼š
```typescript
if (this.consecutiveSilenceFrames >= this.silenceFilterConfig.releaseFrames) {
  this.isSendingAudio = false;  // è¿ç»­20å¸§ï¼ˆ200msï¼‰é™éŸ³å°±åœæ­¢å‘é€
  console.log('[VAD] ğŸ”‡ æ£€æµ‹åˆ°é™éŸ³ï¼Œåœæ­¢å‘é€éŸ³é¢‘');
  return false;
}
```

**é—®é¢˜**ï¼š
- å½•éŸ³å™¨æ¢å¤åï¼Œå¦‚æœç”¨æˆ·è¯´è¯å£°éŸ³å¾ˆå°æˆ–ç¯å¢ƒæœ‰å™ªéŸ³
- VADå¯èƒ½è¯¯åˆ¤ä¸ºé™éŸ³ï¼Œåœ¨200mså†…å°±åœæ­¢å‘é€
- å¯¼è‡´éŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—ï¼ˆåªæœ‰300ms-2ç§’ï¼‰

**åœºæ™¯ç¤ºä¾‹**ï¼š
1. å½•éŸ³å™¨æ¢å¤ï¼ŒVADå¼€å§‹å‘é€ï¼ˆæ–¹æ¡ˆ2å·²ä¿®å¤ï¼Œä¸éœ€è¦æ”»å‡»å»¶è¿Ÿï¼‰
2. ç”¨æˆ·å¼€å§‹è¯´è¯ï¼Œä½†å£°éŸ³è¾ƒå°æˆ–ç¯å¢ƒæœ‰å™ªéŸ³
3. VADæ£€æµ‹åˆ°çŸ­æš‚çš„"é™éŸ³"ï¼ˆå¯èƒ½æ˜¯ä½èƒ½é‡èµ·éŸ³æˆ–ç¯å¢ƒä½™éŸ³ï¼‰
4. 200msåï¼ŒVADåœæ­¢å‘é€ï¼ˆ`releaseFrames: 20`ï¼‰
5. éŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—

### ä¿®å¤æ–¹æ¡ˆ

**æ–°å®ç°**ï¼š
```typescript
// åœ¨ recorder.ts ä¸­æ·»åŠ 
private recoveryProtectionUntil: number = 0;

async start(): Promise<void> {
  // ...
  this.isRecording = true;
  
  // âœ… è®¾ç½®æ¢å¤ä¿æŠ¤çª—å£ï¼ˆ200msï¼‰
  this.recoveryProtectionUntil = Date.now() + 200;
  
  // ... å…¶ä»–é€»è¾‘ ...
}

private processSilenceFilter(audioData: Float32Array): boolean {
  // ... è®¡ç®—RMSã€åˆ¤æ–­isVoiceç­‰ ...
  
  // âœ… æ£€æŸ¥æ˜¯å¦åœ¨ä¿æŠ¤çª—å£å†…
  const inProtectionWindow = Date.now() < this.recoveryProtectionUntil;
  
  if (isVoice) {
    // æ£€æµ‹åˆ°è¯­éŸ³
    // ... æ”»å‡»é€»è¾‘ ...
    return this.isSendingAudio;
  } else {
    // æ£€æµ‹åˆ°é™éŸ³
    if (this.isSendingAudio) {
      // âœ… å¦‚æœåœ¨ä¿æŠ¤çª—å£å†…ï¼Œç¦æ­¢è§¦å‘release
      if (inProtectionWindow) {
        // ä¿æŠ¤çª—å£å†…ï¼Œå³ä½¿æ£€æµ‹åˆ°é™éŸ³ä¹Ÿç»§ç»­å‘é€
        return true;
      }
      
      // ä¿æŠ¤çª—å£å¤–ï¼Œæ­£å¸¸é‡Šæ”¾é€»è¾‘
      if (this.consecutiveSilenceFrames >= this.silenceFilterConfig.releaseFrames) {
        this.isSendingAudio = false;
        return false;
      }
      return true;
    }
    return false;
  }
}
```

### å·¥ä½œåŸç†

1. **è®¾ç½®ä¿æŠ¤çª—å£**ï¼š
   - åœ¨`start()`æ—¶è®¾ç½®ï¼š`this.recoveryProtectionUntil = Date.now() + 200`
   - ä¿æŠ¤çª—å£æŒç»­200ms

2. **ä¿æŠ¤çª—å£å†…ç¦æ­¢é‡Šæ”¾**ï¼š
   - åœ¨`processSilenceFilter`ä¸­æ£€æŸ¥ï¼š`inProtectionWindow = Date.now() < this.recoveryProtectionUntil`
   - å¦‚æœåœ¨ä¿æŠ¤çª—å£å†…ï¼Œä¸”`isSendingAudio = true`ï¼Œ**ç¦æ­¢è§¦å‘release**
   - å³ä½¿æ£€æµ‹åˆ°é™éŸ³ï¼Œä¹Ÿç»§ç»­å‘é€ï¼ˆ`return true`ï¼‰

3. **ä¿æŠ¤çª—å£å¤–æ­£å¸¸é‡Šæ”¾**ï¼š
   - ä¿æŠ¤çª—å£ç»“æŸåï¼Œæ¢å¤æ­£å¸¸é‡Šæ”¾é€»è¾‘
   - å¦‚æœæ£€æµ‹åˆ°è¿ç»­200msé™éŸ³ï¼Œåœæ­¢å‘é€

### ä¿®å¤æ•ˆæœ

**ä¿®å¤å‰**ï¼š
- å½•éŸ³å™¨æ¢å¤åï¼Œå¦‚æœç”¨æˆ·è¯´è¯å£°éŸ³å°æˆ–ç¯å¢ƒæœ‰å™ªéŸ³
- VADå¯èƒ½åœ¨200mså†…å°±åœæ­¢å‘é€
- å¯¼è‡´éŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—

**ä¿®å¤å**ï¼š
- å½•éŸ³å™¨æ¢å¤åçš„å‰200msï¼Œ**ç¦æ­¢è§¦å‘release**
- å³ä½¿æ£€æµ‹åˆ°é™éŸ³ï¼Œä¹Ÿç»§ç»­å‘é€
- é˜²æ­¢ä½èƒ½é‡èµ·éŸ³æˆ–ç¯å¢ƒä½™éŸ³å¯¼è‡´ç¬æ—¶åˆ‡ç‰‡æŠ–åŠ¨

**å…³é”®æ”¹è¿›**ï¼š
- âœ… æ¢å¤åçš„å‰200msï¼Œç¦æ­¢è§¦å‘release
- âœ… é˜²æ­¢ä½èƒ½é‡èµ·éŸ³å¯¼è‡´ç¬æ—¶åˆ‡ç‰‡
- âœ… æé«˜éŸ³é¢‘è¿ç»­æ€§

---

## ä¸‰ä¸ªæ–¹æ¡ˆå¦‚ä½•ååŒå·¥ä½œ

### é—®é¢˜é“¾æ¡

1. **TTSæ’­æ”¾å®Œæˆ** â†’ çŠ¶æ€åˆ‡æ¢ï¼ˆ`PLAYING_TTS` â†’ `INPUT_RECORDING`ï¼‰
2. **å½•éŸ³å™¨æ¢å¤å»¶è¿Ÿ**ï¼ˆ200msï¼‰ â†’ ç”¨æˆ·è¯´è¯çš„å‰200msè¢«ä¸¢å¤±
3. **VADçŠ¶æ€é‡ç½®** â†’ éœ€è¦300msæ”»å‡»å»¶è¿Ÿ â†’ ç”¨æˆ·è¯´è¯çš„å‰300msè¢«ä¸¢å¤±
4. **VADé‡Šæ”¾æœºåˆ¶** â†’ å¦‚æœå£°éŸ³å°ï¼Œ200mså†…å°±åœæ­¢å‘é€ â†’ éŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—

### ä¿®å¤é“¾æ¡

1. **æ–¹æ¡ˆä¸€ï¼šäº‹ä»¶é©±åŠ¨æ¢å¤å½•éŸ³**
   - æ¶ˆé™¤å›ºå®š200mså»¶è¿Ÿ
   - å»¶è¿Ÿå‡å°‘åˆ°16-50ms
   - **ä¿®å¤**ï¼šç”¨æˆ·è¯´è¯çš„å‰200msè¢«ä¸¢å¤± â†’ å‰16-50mså¯èƒ½è¢«ä¸¢å¤±

2. **æ–¹æ¡ˆäºŒï¼šæ™ºèƒ½VADçŠ¶æ€æ¢å¤**
   - çŸ­æœŸåœæ­¢æ—¶ä¿æŒVADçŠ¶æ€
   - æ¶ˆé™¤300msæ”»å‡»å»¶è¿Ÿ
   - **ä¿®å¤**ï¼šç”¨æˆ·è¯´è¯çš„å‰300msè¢«ä¸¢å¼ƒ â†’ ä¸å†è¢«ä¸¢å¼ƒ

3. **æ–¹æ¡ˆä¸‰ï¼šæ¢å¤ä¿æŠ¤çª—å£**
   - æ¢å¤åçš„å‰200msç¦æ­¢è§¦å‘release
   - é˜²æ­¢ä½èƒ½é‡èµ·éŸ³å¯¼è‡´ç¬æ—¶åˆ‡ç‰‡
   - **ä¿®å¤**ï¼šéŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å— â†’ æé«˜è¿ç»­æ€§

### ç»¼åˆæ•ˆæœ

**ä¿®å¤å‰**ï¼š
- ç”¨æˆ·è¯´è¯çš„å‰200msï¼ˆæ¢å¤å»¶è¿Ÿï¼‰+ å‰300msï¼ˆæ”»å‡»å»¶è¿Ÿï¼‰= **å‰500mså¯èƒ½è¢«ä¸¢å¤±**
- å¦‚æœå£°éŸ³å°ï¼Œ200mså†…å°±åœæ­¢å‘é€
- å¯¼è‡´éŸ³é¢‘è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—ï¼ˆ0.26ç§’-4.1ç§’ï¼‰

**ä¿®å¤å**ï¼š
- ç”¨æˆ·è¯´è¯çš„å‰16-50msï¼ˆæ¢å¤å»¶è¿Ÿï¼Œæ–¹æ¡ˆ1ï¼‰
- ç”¨æˆ·è¯´è¯çš„å‰300msä¸å†è¢«ä¸¢å¼ƒï¼ˆæ–¹æ¡ˆ2ï¼‰
- æ¢å¤åçš„å‰200msç¦æ­¢è§¦å‘releaseï¼ˆæ–¹æ¡ˆ3ï¼‰
- **ç»¼åˆæ•ˆæœ**ï¼šéŸ³é¢‘ä¸å†è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—ï¼Œæ¢å¤åˆ°æ­£å¸¸é•¿åº¦ï¼ˆ5-15ç§’ï¼‰

---

## æ€»ç»“

| æ–¹æ¡ˆ | ä¿®å¤çš„é—®é¢˜ | ä¿®å¤æœºåˆ¶ | æ•ˆæœ |
|------|-----------|---------|------|
| æ–¹æ¡ˆä¸€ | å›ºå®š200msæ¢å¤å»¶è¿Ÿ | äº‹ä»¶é©±åŠ¨ + requestAnimationFrame | å»¶è¿Ÿå‡å°‘åˆ°16-50ms |
| æ–¹æ¡ˆäºŒ | 300msæ”»å‡»å»¶è¿Ÿ | çŸ­æœŸåœæ­¢æ—¶ä¿æŒVADçŠ¶æ€ | æ¶ˆé™¤æ”»å‡»å»¶è¿Ÿ |
| æ–¹æ¡ˆä¸‰ | ä½èƒ½é‡èµ·éŸ³å¯¼è‡´åˆ‡ç‰‡ | æ¢å¤å200msä¿æŠ¤çª—å£ | ç¦æ­¢è§¦å‘release |

**ä¸‰ä¸ªæ–¹æ¡ˆååŒå·¥ä½œ**ï¼š
- æ–¹æ¡ˆä¸€å‡å°‘æ¢å¤å»¶è¿Ÿï¼ˆ200ms â†’ 16-50msï¼‰
- æ–¹æ¡ˆäºŒæ¶ˆé™¤æ”»å‡»å»¶è¿Ÿï¼ˆ300ms â†’ 0msï¼‰
- æ–¹æ¡ˆä¸‰é˜²æ­¢ç¬æ—¶åˆ‡ç‰‡ï¼ˆ200msä¿æŠ¤çª—å£ï¼‰

**æœ€ç»ˆæ•ˆæœ**ï¼š
- ç”¨æˆ·è¯´è¯çš„å‰500mså¯èƒ½è¢«ä¸¢å¤± â†’ å‰16-50mså¯èƒ½è¢«ä¸¢å¤±ï¼ˆå‡å°‘90%+ï¼‰
- éŸ³é¢‘ä¸å†è¢«åˆ‡åˆ†æˆå¾ˆå°çš„å—ï¼Œæ¢å¤åˆ°æ­£å¸¸é•¿åº¦
