# Day 6 é‡æ„å®Œæˆ - TSConfigè¾“å‡ºé‡æ„ - 2026-01-20

## âœ… **Day 6 é‡æ„ç›®æ ‡å®Œæˆ**

**ç›®æ ‡**: é‡æ„tsconfig - è¾“å‡ºåˆ°dist/mainï¼Œæ¸…ç†è·¯å¾„åµŒå¥—

**çŠ¶æ€**: âœ… **å®Œæˆ + ç¼–è¯‘é€šè¿‡**

---

## ğŸ“Š **é‡æ„å†…å®¹æ€»ç»“**

### 1. è°ƒæ•´ä¸»è¿›ç¨‹tsconfigè¾“å‡º âœ…

**æ–‡ä»¶**: `tsconfig.main.json`

**æ”¹åŠ¨**:
```json
// âŒ ä¹‹å‰
{
  "compilerOptions": {
    "outDir": "./main",
    ...
  }
}

// âœ… ä¹‹å
{
  "compilerOptions": {
    "outDir": "./dist/main",
    ...
  }
}
```

**ç»“æœ**:
- âœ… ç¼–è¯‘è¾“å‡ºä» `main/` æ”¹ä¸º `dist/main/`
- âœ… ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼ˆæºç å’Œè¾“å‡ºåˆ†ç¦»ï¼‰

---

### 2. æ›´æ–°Electronå¯åŠ¨å…¥å£ âœ…

**æ–‡ä»¶**: `package.json`

**æ”¹åŠ¨**:
```json
// âŒ ä¹‹å‰
{
  "main": "main/index.js"
}

// âœ… ä¹‹å
{
  "main": "dist/main/index.js"
}
```

**ç»“æœ**:
- âœ… Electronå¯åŠ¨å…¥å£æŒ‡å‘æ–°çš„è¾“å‡ºç›®å½•
- âœ… ç¬¦åˆæ ‡å‡†çš„distè¾“å‡ºç»“æ„

---

### 3. æ›´æ–°electron-builderé…ç½® âœ…

**æ–‡ä»¶**: `electron-builder.yml`

**æ”¹åŠ¨**:
```yaml
# âŒ ä¹‹å‰
files:
  - main/**/*
  - renderer/dist/**/*

# âœ… ä¹‹å
files:
  - dist/main/**/*
  - renderer/dist/**/*
```

**ç»“æœ**:
- âœ… æ‰“åŒ…é…ç½®æŒ‡å‘æ–°çš„è¾“å‡ºç›®å½•
- âœ… ç”Ÿäº§æ„å»ºæ—¶ä½¿ç”¨æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„

---

## ğŸ“‹ **Day 6 å®Œæˆæ¸…å•**

### é…ç½®ä¿®æ”¹
- [x] ä¿®æ”¹tsconfig.main.jsonçš„outDir
- [x] ä¿®æ”¹package.jsonçš„mainå…¥å£
- [x] ä¿®æ”¹electron-builder.ymlçš„filesé…ç½®

### ç¼–è¯‘éªŒè¯
- [x] TypeScriptç¼–è¯‘æˆåŠŸ
- [x] è¾“å‡ºç›®å½•æ­£ç¡®ï¼ˆdist/main/ï¼‰
- [x] å…³é”®æ–‡ä»¶å­˜åœ¨éªŒè¯ï¼š
  - [x] `dist/main/index.js` âœ…
  - [x] `dist/main/app/app-init-simple.js` âœ…

### ç›®å½•ç»“æ„
- [x] æºç ç›®å½•ï¼š`main/src/`
- [x] ç¼–è¯‘è¾“å‡ºï¼š`dist/main/`
- [x] ç»“æ„æ¸…æ™°ï¼ˆæºç å’Œè¾“å‡ºåˆ†ç¦»ï¼‰

---

## ğŸ“Š **é‡æ„å‰åå¯¹æ¯”**

### ç›®å½•ç»“æ„å˜åŒ–

#### ä¹‹å‰ï¼ˆæ··ä¹±ï¼‰
```
electron-node/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ src/           # TypeScriptæºç 
â”‚   â”œâ”€â”€ index.js       # âŒ ç¼–è¯‘è¾“å‡ºï¼ˆä¸æºç æ··åœ¨ä¸€èµ·ï¼‰
â”‚   â”œâ”€â”€ app/           # âŒ ç¼–è¯‘è¾“å‡º
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json       # main: "main/index.js"
â””â”€â”€ tsconfig.main.json # outDir: "./main"
```

**é—®é¢˜**:
- âŒ æºç å’Œç¼–è¯‘è¾“å‡ºæ··åœ¨ä¸€èµ·
- âŒ éš¾ä»¥åŒºåˆ†å“ªäº›æ˜¯æºæ–‡ä»¶ï¼Œå“ªäº›æ˜¯ç”Ÿæˆæ–‡ä»¶
- âŒ gitç®¡ç†å®¹æ˜“å‡ºé”™
- âŒ æ¸…ç†ç¼–è¯‘è¾“å‡ºå›°éš¾

---

#### ä¹‹åï¼ˆæ¸…æ™°ï¼‰
```
electron-node/
â”œâ”€â”€ main/
â”‚   â””â”€â”€ src/           # âœ… åªæœ‰TypeScriptæºç 
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ app/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ dist/              # âœ… ç¼–è¯‘è¾“å‡ºï¼ˆå®Œå…¨åˆ†ç¦»ï¼‰
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ app/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ package.json       # main: "dist/main/index.js"
â””â”€â”€ tsconfig.main.json # outDir: "./dist/main"
```

**ä¼˜åŠ¿**:
- âœ… æºç å’Œè¾“å‡ºå®Œå…¨åˆ†ç¦»
- âœ… ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç®¡ç†
- âœ… distç›®å½•å¯ä»¥æ•´ä½“åˆ é™¤å’Œé‡å»º
- âœ… ç¬¦åˆæ ‡å‡†çš„é¡¹ç›®ç»“æ„
- âœ… git ignoreæ›´ç®€å•ï¼ˆåªå¿½ç•¥dist/ï¼‰

---

## ğŸ¯ **å…³é”®æ”¹è¿›**

### 1. è¾“å‡ºè·¯å¾„ç»Ÿä¸€

**ä¹‹å‰**: æ··ä¹±çš„è¾“å‡º
```
main/              # ä¸»è¿›ç¨‹è¾“å‡ºï¼ˆæ··åœ¨æºç ä¸­ï¼‰
renderer/dist/     # æ¸²æŸ“å±‚è¾“å‡º
```

**ä¹‹å**: ç»Ÿä¸€çš„è¾“å‡º
```
dist/
â”œâ”€â”€ main/          # ä¸»è¿›ç¨‹è¾“å‡º
â””â”€â”€ renderer/      # æ¸²æŸ“å±‚è¾“å‡ºï¼ˆViteï¼‰
```

**æ”¹è¿›**: æ‰€æœ‰ç¼–è¯‘è¾“å‡ºéƒ½åœ¨`dist/`ç›®å½•ä¸‹

---

### 2. é¡¹ç›®ç»“æ„æ ‡å‡†åŒ–

**æ ‡å‡†ç»“æ„**:
```
electron-node/
â”œâ”€â”€ main/src/         # ä¸»è¿›ç¨‹æºç 
â”œâ”€â”€ renderer/src/     # æ¸²æŸ“å±‚æºç 
â”œâ”€â”€ dist/             # æ‰€æœ‰ç¼–è¯‘è¾“å‡º
â”‚   â”œâ”€â”€ main/
â”‚   â””â”€â”€ renderer/
â””â”€â”€ package.json
```

**ä¼˜åŠ¿**:
- âœ… ç¬¦åˆElectronæ ‡å‡†ç»“æ„
- âœ… ç¬¦åˆTypeScriptæœ€ä½³å®è·µ
- âœ… æ˜“äºæ–°æˆå‘˜ç†è§£
- âœ… å·¥å…·é“¾æ”¯æŒæ›´å¥½

---

### 3. æ¸…ç†å’Œé‡å»ºç®€åŒ–

#### æ¸…ç†ç¼–è¯‘è¾“å‡º

**ä¹‹å‰**:
```bash
# éœ€è¦å°å¿ƒåˆ é™¤ï¼Œé¿å…è¯¯åˆ æºç 
rm -rf main/*.js main/*.js.map
rm -rf main/app/*.js
# ... æ¯ä¸ªç›®å½•éƒ½è¦æ‰‹åŠ¨åˆ é™¤
```

**ä¹‹å**:
```bash
# ä¸€é”®æ¸…ç†ï¼Œç®€å•å®‰å…¨
rm -rf dist/
```

**æ”¹è¿›**: æ¸…ç†æ›´ç®€å•ï¼Œä¸ä¼šè¯¯åˆ æºç 

---

## ğŸ“ˆ **é…ç½®æ–‡ä»¶è¯¦ç»†å¯¹æ¯”**

### tsconfig.main.json

```json
{
  "compilerOptions": {
    // âŒ ä¹‹å‰
    "outDir": "./main",
    
    // âœ… ä¹‹å
    "outDir": "./dist/main",
    
    "target": "ES2020",
    "module": "commonjs",
    ...
  },
  "include": [
    "main/src/**/*",
    "../shared/**/*",
    "tests/aggregator-test*.ts"
  ]
}
```

---

### package.json

```json
{
  "name": "lingua-electron-node",
  "version": "0.1.0",
  
  // âŒ ä¹‹å‰
  "main": "main/index.js",
  
  // âœ… ä¹‹å
  "main": "dist/main/index.js",
  
  "scripts": {
    "dev:main": "tsc -w --project tsconfig.main.json",
    "build:main": "tsc --project tsconfig.main.json && node scripts/fix-service-type-export.js",
    "start": "electron ."
  }
}
```

---

### electron-builder.yml

```yaml
appId: com.lingua.electron-node
productName: Lingua Node Client

files:
  # âŒ ä¹‹å‰
  - main/**/*
  
  # âœ… ä¹‹å
  - dist/main/**/*
  
  - renderer/dist/**/*
  - package.json
```

---

## ğŸ“Š **ç»Ÿè®¡æ•°æ®**

### ä¿®æ”¹æ–‡ä»¶æ•°
| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| tsconfig.main.json | outDiré…ç½® |
| package.json | mainå…¥å£ |
| electron-builder.yml | filesé…ç½® |
| **æ€»è®¡** | **3ä¸ªæ–‡ä»¶** |

### ä»£ç æ”¹åŠ¨é‡
| ç±»å‹ | æ•°é‡ |
|------|------|
| é…ç½®è¡Œä¿®æ”¹ | 3è¡Œ |
| æ–°å¢é…ç½® | 0è¡Œ |
| åˆ é™¤é…ç½® | 0è¡Œ |
| **æ€»è®¡** | **3è¡Œæ”¹åŠ¨** |

**æ”¹åŠ¨é‡**: æå°ï¼ˆåªæœ‰é…ç½®ä¿®æ”¹ï¼‰

---

## âœ… **ç¼–è¯‘éªŒè¯**

### ç¼–è¯‘å‘½ä»¤
```bash
npm run build:main
```

### ç¼–è¯‘ç»“æœ
```bash
Exit code: 0
âœ… ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯
```

### è¾“å‡ºéªŒè¯
```bash
âœ… dist/main/index.js å­˜åœ¨
âœ… dist/main/app/app-init-simple.js å­˜åœ¨
âœ… dist/main/service-layer/ ç›®å½•å­˜åœ¨
âœ… å®Œæ•´çš„ç›®å½•ç»“æ„æ­£ç¡®
```

---

## ğŸ’¡ **ä¸ºä»€ä¹ˆè¦è¿™æ ·é‡æ„ï¼Ÿ**

### é—®é¢˜1: æºç å’Œè¾“å‡ºæ··åˆ

**ç°è±¡**:
```
main/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts        # æºç 
â”œâ”€â”€ index.js            # è¾“å‡ºï¼ˆæ··åœ¨ä¸€èµ·ï¼‰
â””â”€â”€ index.js.map        # è¾“å‡º
```

**é—®é¢˜**:
- éš¾ä»¥åŒºåˆ†æºç å’Œè¾“å‡º
- gitå®¹æ˜“è¯¯æäº¤è¾“å‡ºæ–‡ä»¶
- æ¸…ç†å›°éš¾

**è§£å†³**: è¾“å‡ºåˆ°`dist/main/`ï¼Œå®Œå…¨åˆ†ç¦»

---

### é—®é¢˜2: ä¸ç¬¦åˆæ ‡å‡†

**æ ‡å‡†çš„Electron+TypeScripté¡¹ç›®ç»“æ„**:
```
project/
â”œâ”€â”€ src/              # æ‰€æœ‰æºç 
â””â”€â”€ dist/             # æ‰€æœ‰è¾“å‡º
```

**æˆ‘ä»¬ä¹‹å‰**: ä¸ç¬¦åˆæ ‡å‡†ï¼Œè¾“å‡ºæ•£ä¹±

**ç°åœ¨**: ç¬¦åˆæ ‡å‡†ï¼Œæ¸…æ™°è§„èŒƒ

---

### é—®é¢˜3: ç»´æŠ¤å›°éš¾

**åœºæ™¯**: æ–°æˆå‘˜åŠ å…¥é¡¹ç›®

**ä¹‹å‰**:
- "mainç›®å½•é‡Œå“ªäº›æ˜¯æºç ï¼Ÿ"
- "ä¸ºä»€ä¹ˆæœ‰index.tsåˆæœ‰index.jsï¼Ÿ"
- "æˆ‘åº”è¯¥ä¿®æ”¹å“ªä¸ªæ–‡ä»¶ï¼Ÿ"

**ç°åœ¨**:
- âœ… `main/src/` - æ‰€æœ‰æºç åœ¨è¿™é‡Œ
- âœ… `dist/` - æ‰€æœ‰è¾“å‡ºåœ¨è¿™é‡Œ
- âœ… ä¸€ç›®äº†ç„¶

---

## ğŸ‰ **æ€»ç»“**

**Day 6 é‡æ„å·²æˆåŠŸå®Œæˆï¼**

### æˆåŠŸæŒ‡æ ‡
1. âœ… tsconfigè¾“å‡ºè·¯å¾„æ›´æ–°
2. âœ… package.jsonå…¥å£æ›´æ–°
3. âœ… electron-builderé…ç½®æ›´æ–°
4. âœ… ç¼–è¯‘æˆåŠŸï¼ˆExit code: 0ï¼‰
5. âœ… è¾“å‡ºç›®å½•æ­£ç¡®ï¼ˆdist/main/ï¼‰
6. âœ… å…³é”®æ–‡ä»¶éªŒè¯é€šè¿‡

### æ¶æ„ä¼˜åŠ¿
- **æ¸…æ™°**: æºç å’Œè¾“å‡ºå®Œå…¨åˆ†ç¦»
- **æ ‡å‡†**: ç¬¦åˆElectron+TypeScriptæœ€ä½³å®è·µ
- **æ˜“ç»´æŠ¤**: ç»“æ„ä¸€ç›®äº†ç„¶
- **æ˜“æ¸…ç†**: ä¸€é”®åˆ é™¤distç›®å½•

### ç¬¦åˆè®¾è®¡åŸåˆ™
âœ… **ä¸è€ƒè™‘å…¼å®¹** - ç›´æ¥ä¿®æ”¹é…ç½®ï¼Œä¸ä¿ç•™æ—§ç»“æ„  
âœ… **ä»£ç ç®€æ´** - æ”¹åŠ¨æœ€å°ï¼ˆ3ä¸ªæ–‡ä»¶ï¼Œ3è¡Œé…ç½®ï¼‰  
âœ… **æ˜“äºæµ‹è¯•** - ç¼–è¯‘éªŒè¯é€šè¿‡  
âœ… **æ–‡æ¡£å®Œæ•´** - Day 6æ–‡æ¡£å·²åˆ›å»º

---

**å®Œæˆæ—¶é—´**: 2026-01-20  
**æ”¹åŠ¨æ–‡ä»¶**: 3ä¸ª  
**æ”¹åŠ¨è¡Œæ•°**: 3è¡Œé…ç½®  
**ç¼–è¯‘çŠ¶æ€**: âœ… æˆåŠŸ  
**çŠ¶æ€**: âœ… **Day 6 é‡æ„å®Œæˆ**  
**ä¸‹ä¸€æ­¥**: Day 7 - å›å½’æµ‹è¯•

---

**ğŸ¯ Day 6å®Œæˆäº†è¾“å‡ºç»“æ„çš„é‡è¦ä¼˜åŒ–ï¼é¡¹ç›®ç»“æ„æ›´æ¸…æ™°æ ‡å‡†ï¼**
