# 快速验证清单 - 2026-01-20

## ✅ **已完成**

- [x] 删除冗余的`runtime-handlers-simple.ts`
- [x] 清理`index.ts`中的引用
- [x] 编译成功
- [x] 单元测试通过（11/11）
- [x] 文档更新完成

---

## 🧪 **手动验证（2分钟）**

### Step 1: 启动应用

```powershell
# Terminal 1: 启动Vite（如果未运行）
cd d:\Programs\github\lingua_1\electron_node\electron-node
npm run dev

# Terminal 2: 启动Electron
npm start
```

---

### Step 2: 验证服务列表

**预期**: ✅ 应该看到所有服务
- FastWhisperVad 语音识别
- NMT 翻译服务
- TTS 语音合成
- Semantic Repair Service - Chinese
- Semantic Repair Service (统一)
- 节点推理服务（Rust）

---

### Step 3: 验证服务启动（观察状态变化）

1. **点击启动"NMT翻译服务"**
2. **观察状态**:
   - 立即显示：⏳ **"正在启动..."**（或类似）
   - 2-5秒后：✅ **"运行中"**
3. **确认PID显示**

**预期**: ✅ 状态流转清晰，不立即显示"运行中"

---

### Step 4: 验证刷新服务

1. **确保NMT服务正在运行**
2. **记录PID**（例如：12345）
3. **点击"刷新服务"按钮**
4. **验证**:
   - ✅ NMT仍然显示"运行中"
   - ✅ PID没有变化
   - ✅ 服务未被停止

**预期**: ✅ 刷新不影响运行中的服务

---

### Step 5: 验证服务停止

1. **点击停止NMT服务**
2. **观察状态**:
   - 变为：⚫ **"已停止"**
3. **确认PID清除**

**预期**: ✅ 服务正确停止

---

### Step 6: 验证配置保存

1. **启动2个服务**（如NMT和TTS）
2. **关闭Electron应用**
3. **重新启动应用**
4. **检查**:
   - ✅ NMT和TTS应该自动启动（或显示为上次状态）

**预期**: ✅ 配置正确保存和恢复

---

## 🎯 **如果测试全部通过**

**结论**: ✅ **架构统一完成！无问题！**

可以继续进行Day 2的重构。

---

## ⚠️ **如果有问题**

### 问题1: 服务列表为空

**检查**:
```powershell
# 确认services目录存在
ls d:\Programs\github\lingua_1\electron_node\services

# 查看日志
cat electron_node\electron-node\logs\electron-main.log | Select-String "ServiceDiscovery"
```

### 问题2: 服务无法启动

**检查错误信息**:
- UI中应该显示具体错误
- 查看日志文件
- 手动启动服务验证

### 问题3: 状态立即显示"运行中"

**可能原因**:
- 代码未重新编译
- 使用了旧的缓存

**解决**:
```powershell
npm run build:main
npm start
```

---

## 📝 **验证结果记录**

### 测试1: 服务列表
- [ ] 通过 / [ ] 失败
- 备注: ________________

### 测试2: 服务启动（状态流转）
- [ ] 通过 / [ ] 失败
- 备注: ________________

### 测试3: 刷新服务
- [ ] 通过 / [ ] 失败
- 备注: ________________

### 测试4: 服务停止
- [ ] 通过 / [ ] 失败
- 备注: ________________

### 测试5: 配置保存
- [ ] 通过 / [ ] 失败
- 备注: ________________

---

## ✅ **通过标准**

所有5个测试都通过 → 架构统一成功！

---

**验证时间**: 2分钟  
**关键观察**: 状态流转和刷新行为  
**成功标志**: 所有功能正常，无错误
