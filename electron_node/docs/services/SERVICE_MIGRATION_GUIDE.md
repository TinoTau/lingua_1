# è¯­ä¹‰ä¿®å¤æœåŠ¡è¿ç§»æŒ‡å—

**æ›´æ–°æ—¥æœŸ**: 2026-01-19  
**ç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ æ¦‚è¿°

åŸæœ‰çš„3ä¸ªç‹¬ç«‹è¯­ä¹‰ä¿®å¤æœåŠ¡å·²è¢«åˆå¹¶ä¸º1ä¸ªç»Ÿä¸€æœåŠ¡ï¼Œä»¥æé«˜ä»£ç è´¨é‡å’Œç»´æŠ¤æ•ˆç‡ã€‚

---

## ğŸ”„ æœåŠ¡çŠ¶æ€å˜æ›´

### å·²åºŸå¼ƒçš„æœåŠ¡ï¼ˆé»˜è®¤å…³é—­ï¼‰

ä»¥ä¸‹æœåŠ¡å·²æ ‡è®°ä¸º `deprecated` å¹¶è®¾ç½® `enabled: false`ï¼š

| æœåŠ¡ID | åç§° | ç«¯å£ | çŠ¶æ€ | æ›¿ä»£æ–¹æ¡ˆ |
|--------|------|------|------|---------|
| `semantic-repair-zh` | ä¸­æ–‡è¯­ä¹‰ä¿®å¤ | 5013 | âŒ é»˜è®¤å…³é—­ | ä½¿ç”¨ `semantic-repair-en-zh` |
| `semantic-repair-en` | è‹±æ–‡è¯­ä¹‰ä¿®å¤ | 5011 | âŒ é»˜è®¤å…³é—­ | ä½¿ç”¨ `semantic-repair-en-zh` |
| `en-normalize` | è‹±æ–‡æ ‡å‡†åŒ– | 5012 | âŒ é»˜è®¤å…³é—­ | ä½¿ç”¨ `semantic-repair-en-zh` |

### æ–°çš„ç»Ÿä¸€æœåŠ¡ï¼ˆé»˜è®¤å¯ç”¨ï¼‰

| æœåŠ¡ID | åç§° | ç«¯å£ | çŠ¶æ€ | åŠŸèƒ½ |
|--------|------|------|------|------|
| `semantic-repair-en-zh` | ç»Ÿä¸€è¯­ä¹‰ä¿®å¤æœåŠ¡ | 5015 | âœ… é»˜è®¤å¯ç”¨ | ä¸­æ–‡ä¿®å¤ + è‹±æ–‡ä¿®å¤ + è‹±æ–‡æ ‡å‡†åŒ– |

---

## ğŸ“ é…ç½®å­—æ®µè¯´æ˜

### æ–°å¢é…ç½®å­—æ®µ

#### 1. `enabled` (boolean)
- **ç”¨é€”**: æ§åˆ¶æœåŠ¡æ˜¯å¦é»˜è®¤å¯ç”¨
- **å€¼**:
  - `true`: æœåŠ¡é»˜è®¤å¯ç”¨ï¼ˆæ¨èå¯åŠ¨ï¼‰
  - `false`: æœåŠ¡é»˜è®¤å…³é—­ï¼ˆéœ€è¦æ‰‹åŠ¨å¯åŠ¨ï¼‰

#### 2. `deprecated` (boolean)
- **ç”¨é€”**: æ ‡è®°æœåŠ¡æ˜¯å¦å·²åºŸå¼ƒ
- **å€¼**:
  - `true`: æœåŠ¡å·²åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆ
  - `false` æˆ–ä¸å­˜åœ¨: æœåŠ¡æ­£å¸¸ç»´æŠ¤ä¸­

#### 3. `deprecated_reason` (string)
- **ç”¨é€”**: è¯´æ˜æœåŠ¡åºŸå¼ƒçš„åŸå› å’Œæ›¿ä»£æ–¹æ¡ˆ
- **ç¤ºä¾‹**: `"Use semantic-repair-en-zh unified service instead"`

#### 4. `replaces` (array)
- **ç”¨é€”**: åˆ—å‡ºè¢«æ­¤æœåŠ¡æ›¿ä»£çš„æ—§æœåŠ¡ID
- **ç¤ºä¾‹**: `["semantic-repair-zh", "semantic-repair-en", "en-normalize"]`

---

## ğŸ” é…ç½®ç¤ºä¾‹

### å·²åºŸå¼ƒæœåŠ¡é…ç½®

```json
{
  "service_id": "semantic-repair-zh",
  "name": "Semantic Repair Service - Chinese",
  "version": "1.0.0",
  "enabled": false,
  "deprecated": true,
  "deprecated_reason": "Use semantic-repair-en-zh unified service instead",
  ...
}
```

### ç»Ÿä¸€æœåŠ¡é…ç½®

```json
{
  "service_id": "semantic-repair-en-zh",
  "name": "Unified Semantic Repair Service (EN/ZH + Normalize)",
  "version": "1.0.0",
  "enabled": true,
  "replaces": ["semantic-repair-zh", "semantic-repair-en", "en-normalize"],
  ...
}
```

---

## ğŸš€ è¿ç§»æ­¥éª¤

### å¯¹äºæ–°éƒ¨ç½²

1. **åªå¯åŠ¨ç»Ÿä¸€æœåŠ¡**
   ```typescript
   await semanticRepairServiceManager.startService('semantic-repair-en-zh');
   ```

2. **æ—§æœåŠ¡æ— éœ€å¯åŠ¨**
   - å·²æ ‡è®°ä¸º `enabled: false`
   - ç³»ç»Ÿé»˜è®¤ä¸ä¼šè‡ªåŠ¨å¯åŠ¨

### å¯¹äºç°æœ‰éƒ¨ç½²

#### æ–¹æ¡ˆ Aï¼šç›´æ¥åˆ‡æ¢ï¼ˆæ¨èï¼‰

1. **åœæ­¢æ—§æœåŠ¡**
   ```typescript
   await semanticRepairServiceManager.stopService('semantic-repair-zh');
   await semanticRepairServiceManager.stopService('semantic-repair-en');
   await semanticRepairServiceManager.stopService('en-normalize');
   ```

2. **å¯åŠ¨æ–°æœåŠ¡**
   ```typescript
   await semanticRepairServiceManager.startService('semantic-repair-en-zh');
   ```

3. **æ›´æ–°è°ƒç”¨æ–¹ä»£ç **
   - å°†ç«¯å£ä» 5011/5012/5013 æ”¹ä¸º 5015
   - ä½¿ç”¨æ–°çš„è·¯å¾„ç»“æ„ï¼ˆè§ä¸‹æ–¹ API è¿ç§»ï¼‰

#### æ–¹æ¡ˆ Bï¼šå¹¶è¡Œè¿è¡Œï¼ˆè¿‡æ¸¡æœŸï¼‰

1. **åŒæ—¶è¿è¡Œæ–°æ—§æœåŠ¡**
   ```typescript
   // æ—§æœåŠ¡ç»§ç»­è¿è¡Œï¼ˆå¦‚æœå·²å¯åŠ¨ï¼‰
   // æ–°æœåŠ¡å•ç‹¬å¯åŠ¨
   await semanticRepairServiceManager.startService('semantic-repair-en-zh');
   ```

2. **é€æ­¥è¿ç§»è°ƒç”¨æ–¹**
   - å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
   - é€ä¸ªæ¨¡å—è¿ç§»åˆ°æ–°æœåŠ¡
   - æœ€ååœæ­¢æ—§æœåŠ¡

---

## ğŸ”Œ API è¿ç§»å¯¹ç…§

### æ—§æœåŠ¡ API

```bash
# ä¸­æ–‡ä¿®å¤ï¼ˆæ—§ï¼‰
POST http://localhost:5013/repair
{
  "job_id": "test",
  "session_id": "s1",
  "text_in": "ä½ å·",
  "lang": "zh"  # éœ€è¦ lang å‚æ•°
}

# è‹±æ–‡ä¿®å¤ï¼ˆæ—§ï¼‰
POST http://localhost:5011/repair
{
  "job_id": "test",
  "session_id": "s1",
  "text_in": "helo",
  "lang": "en"  # éœ€è¦ lang å‚æ•°
}

# è‹±æ–‡æ ‡å‡†åŒ–ï¼ˆæ—§ï¼‰
POST http://localhost:5012/normalize
{
  "job_id": "test",
  "session_id": "s1",
  "text_in": "HELLO"
}
```

### æ–°æœåŠ¡ API

```bash
# ä¸­æ–‡ä¿®å¤ï¼ˆæ–°ï¼‰- è·¯å¾„å³ç­–ç•¥
POST http://localhost:5015/zh/repair
{
  "job_id": "test",
  "session_id": "s1",
  "text_in": "ä½ å·"
  # ä¸éœ€è¦ lang å‚æ•°
}

# è‹±æ–‡ä¿®å¤ï¼ˆæ–°ï¼‰- è·¯å¾„å³ç­–ç•¥
POST http://localhost:5015/en/repair
{
  "job_id": "test",
  "session_id": "s1",
  "text_in": "helo"
  # ä¸éœ€è¦ lang å‚æ•°
}

# è‹±æ–‡æ ‡å‡†åŒ–ï¼ˆæ–°ï¼‰- è·¯å¾„å³ç­–ç•¥
POST http://localhost:5015/en/normalize
{
  "job_id": "test",
  "session_id": "s1",
  "text_in": "HELLO"
}
```

### å…³é”®å˜åŒ–

| å˜åŒ–é¡¹ | æ—§æ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ |
|--------|--------|--------|
| **ç«¯å£** | 3ä¸ªç«¯å£ï¼ˆ5011/5012/5013ï¼‰ | 1ä¸ªç«¯å£ï¼ˆ5015ï¼‰ |
| **è·¯å¾„** | `/repair` æˆ– `/normalize` | `/zh/repair`, `/en/repair`, `/en/normalize` |
| **è¯­è¨€å‚æ•°** | éœ€è¦ `lang` å­—æ®µ | ä¸éœ€è¦ï¼ˆé€šè¿‡è·¯å¾„åˆ¤æ–­ï¼‰ |
| **æœåŠ¡æ•°é‡** | 3ä¸ªç‹¬ç«‹æœåŠ¡ | 1ä¸ªç»Ÿä¸€æœåŠ¡ |

---

## ğŸ“Š è¿ç§»æ£€æŸ¥æ¸…å•

### é…ç½®å±‚é¢

- [x] æ—§æœåŠ¡é…ç½®æ·»åŠ  `enabled: false`
- [x] æ—§æœåŠ¡é…ç½®æ·»åŠ  `deprecated: true`
- [x] æ–°æœåŠ¡é…ç½®æ·»åŠ  `enabled: true`
- [x] æ–°æœåŠ¡é…ç½®æ·»åŠ  `replaces` å­—æ®µ

### ä»£ç å±‚é¢

- [ ] æ›´æ–°è°ƒç”¨æ–¹ä»£ç ï¼ˆç«¯å£ä» 5011/5012/5013 â†’ 5015ï¼‰
- [ ] æ›´æ–° API è·¯å¾„ï¼ˆæ·»åŠ  `/zh/` æˆ– `/en/` å‰ç¼€ï¼‰
- [ ] ç§»é™¤ `lang` å‚æ•°ï¼ˆä¸å†éœ€è¦ï¼‰
- [ ] æ›´æ–°å¥åº·æ£€æŸ¥ URL

### æµ‹è¯•å±‚é¢

- [ ] æµ‹è¯•æ–°æœåŠ¡çš„ä¸­æ–‡ä¿®å¤åŠŸèƒ½
- [ ] æµ‹è¯•æ–°æœåŠ¡çš„è‹±æ–‡ä¿®å¤åŠŸèƒ½
- [ ] æµ‹è¯•æ–°æœåŠ¡çš„è‹±æ–‡æ ‡å‡†åŒ–åŠŸèƒ½
- [ ] éªŒè¯æ€§èƒ½ä¸æ—§æœåŠ¡ç›¸å½“
- [ ] æµ‹è¯•å¹¶å‘åœºæ™¯

### éƒ¨ç½²å±‚é¢

- [ ] åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
- [ ] åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [ ] ç›‘æ§æ–°æœåŠ¡è¿è¡ŒçŠ¶æ€
- [ ] ç¡®è®¤æ—§æœåŠ¡å¯ä»¥å®Œå…¨åœç”¨

---

## ğŸ› ï¸ æ‰‹åŠ¨æ§åˆ¶æ—§æœåŠ¡

### å¦‚æœéœ€è¦ä¸´æ—¶å¯ç”¨æ—§æœåŠ¡

å°½ç®¡æ—§æœåŠ¡å·²æ ‡è®°ä¸º `enabled: false`ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ‰‹åŠ¨å¯åŠ¨å®ƒä»¬ï¼š

```typescript
// æ‰‹åŠ¨å¯åŠ¨æ—§æœåŠ¡ï¼ˆä¸æ¨èï¼Œä»…ç”¨äºç´§æ€¥æƒ…å†µï¼‰
await semanticRepairServiceManager.startService('semantic-repair-zh');
await semanticRepairServiceManager.startService('semantic-repair-en');
await semanticRepairServiceManager.startService('en-normalize');
```

### å¦‚æœéœ€è¦æ°¸ä¹…æ¢å¤æ—§æœåŠ¡

1. ä¿®æ”¹å¯¹åº”æœåŠ¡çš„ `service.json`
2. å°† `enabled` æ”¹ä¸º `true`
3. å°† `deprecated` æ”¹ä¸º `false`ï¼ˆæˆ–åˆ é™¤è¯¥å­—æ®µï¼‰
4. é‡å¯æœåŠ¡ç®¡ç†å™¨

---

## ğŸ“ˆ è¿ç§»æ”¶ç›Š

### èµ„æºä¼˜åŒ–

| æŒ‡æ ‡ | æ—§æ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ | æ”¹è¿› |
|------|--------|--------|------|
| æœåŠ¡è¿›ç¨‹æ•° | 3 | 1 | -66% |
| ç«¯å£å ç”¨ | 3 | 1 | -66% |
| å¯åŠ¨æ—¶é—´ | 3xæ¨¡å‹åŠ è½½ | 1xæ¨¡å‹åŠ è½½* | ~33% |
| å†…å­˜å ç”¨ | 3xåŸºç¡€å¼€é”€ | 1xåŸºç¡€å¼€é”€ | -66% |

\* æ–°æœåŠ¡ä½¿ç”¨ä¸²è¡ŒåŠ è½½ç­–ç•¥ï¼Œé¿å…GPUå†…å­˜å³°å€¼

### ä»£ç è´¨é‡

| æŒ‡æ ‡ | æ—§æ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ | æ”¹è¿› |
|------|--------|--------|------|
| ä»£ç è¡Œæ•° | ~1500è¡Œ | ~600è¡Œ | -60% |
| é‡å¤ä»£ç  | ~1275è¡Œ | 0è¡Œ | -100% |
| if-elseåˆ¤æ–­ | 3å¤„ | 0å¤„ | -100% |
| å•å…ƒæµ‹è¯• | 0ä¸ª | 15ä¸ª | âœ… |

### ç»´æŠ¤æˆæœ¬

- **éƒ¨ç½²å¤æ‚åº¦**: ä»ç®¡ç†3ä¸ªæœåŠ¡å‡å°‘åˆ°1ä¸ª
- **é…ç½®ç®¡ç†**: ä»3ä¸ªé…ç½®æ–‡ä»¶å‡å°‘åˆ°1ä¸ª
- **æ—¥å¿—ç®¡ç†**: ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼å’Œé”™è¯¯å¤„ç†
- **ç‰ˆæœ¬å‡çº§**: åªéœ€æ›´æ–°1ä¸ªæœåŠ¡

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ç»Ÿä¸€æœåŠ¡ README](./semantic_repair_en_zh/README.md)
- [æœåŠ¡æ³¨å†Œè¯´æ˜](./semantic_repair_en_zh/SERVICE_REGISTRATION.md)
- [éƒ¨ç½²æ£€æŸ¥æ¸…å•](./semantic_repair_en_zh/DEPLOYMENT_CHECKLIST.md)
- [è®¾è®¡æ–¹æ¡ˆ](../docs/architecture/SEMANTIC_REPAIR_SERVICE_UNIFICATION_DESIGN.md)
- [å®æ–½æ€»ç»“](../docs/architecture/UNIFIED_SEMANTIC_REPAIR_IMPLEMENTATION_SUMMARY.md)

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ—§æœåŠ¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«ç§»é™¤ï¼Ÿ
**A**: æ—§æœåŠ¡ä»£ç ä¼šä¿ç•™ä¸€æ®µæ—¶é—´ï¼ˆå»ºè®®3-6ä¸ªæœˆï¼‰ï¼Œä»¥ä¾¿ç´§æ€¥å›é€€ã€‚ç¡®è®¤æ–°æœåŠ¡ç¨³å®šåå¯ä»¥åˆ é™¤ã€‚

### Q2: æ–°æœåŠ¡çš„æ€§èƒ½å¦‚ä½•ï¼Ÿ
**A**: æ–°æœåŠ¡ä¸æ—§æœåŠ¡ä½¿ç”¨ç›¸åŒçš„æ¨¡å‹å’Œå¼•æ“ï¼Œæ€§èƒ½ç›¸å½“ã€‚ç»Ÿä¸€åŒ…è£…å™¨å¢åŠ äº†çº¦1-2msçš„å¼€é”€ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

### Q3: å¦‚ä½•éªŒè¯è¿ç§»æˆåŠŸï¼Ÿ
**A**: ä½¿ç”¨ç›¸åŒçš„è¾“å…¥æµ‹è¯•æ–°æ—§æœåŠ¡ï¼Œæ¯”è¾ƒè¾“å‡ºç»“æœå’Œå“åº”æ—¶é—´ã€‚å‚è€ƒ [DEPLOYMENT_CHECKLIST.md](./semantic_repair_en_zh/DEPLOYMENT_CHECKLIST.md)ã€‚

### Q4: å¯ä»¥åŒæ—¶è¿è¡Œæ–°æ—§æœåŠ¡å—ï¼Ÿ
**A**: å¯ä»¥ã€‚æ–°æ—§æœåŠ¡ä½¿ç”¨ä¸åŒç«¯å£ï¼Œä¸ä¼šå†²çªã€‚ä½†ä¼šå¢åŠ GPUå†…å­˜å ç”¨ã€‚

### Q5: å¦‚ä½•å›é€€åˆ°æ—§æœåŠ¡ï¼Ÿ
**A**: åœæ­¢æ–°æœåŠ¡ï¼Œå¯åŠ¨æ—§æœåŠ¡ï¼Œæ¢å¤è°ƒç”¨æ–¹ä»£ç ã€‚é…ç½®æ–‡ä»¶å·²ä¿ç•™ï¼Œå¯ä»¥éšæ—¶åˆ‡æ¢ã€‚

---

**çŠ¶æ€**: âœ… é…ç½®å·²æ›´æ–°  
**ç”Ÿæ•ˆæ—¶é—´**: ç«‹å³ç”Ÿæ•ˆï¼ˆéœ€è¦é‡å¯æœåŠ¡ç®¡ç†å™¨ï¼‰  
**ç»´æŠ¤äºº**: AI Assistant  
**æ›´æ–°æ—¥æœŸ**: 2026-01-19
