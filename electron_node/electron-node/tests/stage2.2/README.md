# 阶段 2.2：Electron Node 客户端功能测试

## 测试概述

本目录包含阶段 2.2（Electron Node 客户端）的功能测试。

**测试日期**: 2025-01-XX  
**测试范围**: 
- HTTP 推理服务集成
- 系统资源监控
- 功能模块管理
- 模型管理
- 节点注册和心跳
- 流式 ASR 支持

## 测试模块

### 1. HTTP 推理服务集成测试
- 健康检查端点测试
- 同步推理请求测试
- 流式推理请求测试
- ASR 部分结果回调测试

### 2. 系统资源监控测试
- CPU 使用率监控
- 内存使用率监控
- GPU 使用率监控（如果可用）

### 3. 功能模块管理测试
- 模块状态获取
- 模块启用/禁用
- 模块状态持久化

### 4. 模型管理测试
- 模型列表获取
- 模型安装
- 模型卸载

### 5. 节点注册和心跳测试
- 节点注册
- 心跳发送
- 连接管理

### 6. 流式 ASR 支持测试
- 部分结果回调
- 流式推理请求

## 运行测试

### 前置条件

1. **启动推理服务**：
```bash
cd node-inference
export MODELS_DIR=./models
export INFERENCE_SERVICE_PORT=5009
cargo run --bin inference-service
```

2. **启动调度服务器**（可选，用于完整测试）：
```bash
cd scheduler
cargo run
```

### 手动测试步骤

由于 Electron 客户端是 GUI 应用，主要进行手动功能测试：

1. **编译 Electron 客户端**：
```bash
cd electron-node
npm run build:main
npm run build:renderer
```

2. **启动 Electron**：
```bash
npm start
```

3. **测试各项功能**：
   - 检查系统资源监控显示
   - 测试功能模块管理 UI
   - 测试模型管理功能
   - 检查节点注册状态

## 测试检查清单

- [ ] 系统资源监控正常显示（CPU、内存、GPU）
- [ ] 功能模块管理 UI 正常显示
- [ ] 可以切换模块状态
- [ ] 手动刷新功能正常
- [ ] 模型列表正常显示
- [ ] 节点状态正常显示
- [ ] 节点可以成功注册到调度服务器
- [ ] 心跳正常发送

## 注意事项

1. **推理服务**：需要推理服务运行才能测试完整功能
2. **模型文件**：某些测试需要模型文件
3. **Python 环境**：GPU 监控需要 Python 和 nvidia-ml-py
4. **调度服务器**：节点注册测试需要调度服务器运行

