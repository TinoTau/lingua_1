# é›†æˆæµ‹è¯•é—®é¢˜åˆ†æ

**æ—¥æœŸ**: 2025-12-25  
**çŠ¶æ€**: ğŸ” **é—®é¢˜å·²å®šä½**

---

## é—®é¢˜ç°è±¡

1. **Webç«¯æ²¡æœ‰æ¥æ”¶åˆ°æœ‰æ•ˆè¯­éŸ³**
2. **faster-whisper-vadæœåŠ¡å´©æºƒ**

---

## æ—¥å¿—åˆ†æ

### 1. æœåŠ¡é‡å¯

```
2025-12-25 07:50:41,107 - æœåŠ¡å¯åŠ¨ (PID: 41600)
2025-12-25 07:50:45,892 - ASR Worker process ready
```

### 2. Jobå¤„ç†æƒ…å†µ

#### Job-031EC479 âœ… éŸ³é¢‘è´¨é‡é€šè¿‡ï¼Œä½†ASRè¿”å›ç©ºæ–‡æœ¬

```
07:53:09,944 - Audio data validation: rms=0.0329, std=0.0329, dynamic_range=0.3478, duration=0.240s
07:53:09,945 - Submitting ASR task to worker process âœ…
07:53:18,643 - ASR Worker: Converted segments to list (took 8.690s, count=0) âŒ
07:53:18,643 - Task completed successfully, text_len=0 âŒ
```

**é—®é¢˜**: 
- éŸ³é¢‘è´¨é‡æ£€æŸ¥é€šè¿‡ï¼ˆRMS=0.0329 > 0.005, std=0.0329 > 0.01, dynamic_range=0.3478 > 0.02ï¼‰
- ä½†ASR workerå¤„ç†åè¿”å›0ä¸ªsegmentsï¼ˆç©ºæ–‡æœ¬ï¼‰
- å¤„ç†æ—¶é—´å¼‚å¸¸ï¼š8.69ç§’å¤„ç†0.24ç§’éŸ³é¢‘ï¼ˆ36.31å€ï¼‰

#### Job-E14E2B85 âœ… éŸ³é¢‘è´¨é‡é€šè¿‡ï¼Œä½†ASRè¿”å›ç©ºæ–‡æœ¬

```
07:53:22,002 - Audio data validation: rms=0.0760, std=0.0760, dynamic_range=0.4436, duration=0.240s
07:53:22,002 - Submitting ASR task to worker process âœ…
07:53:24,137 - ASR Worker: Converted segments to list (took 2.131s, count=0) âŒ
07:53:24,137 - Task completed successfully, text_len=0 âŒ
```

**é—®é¢˜**: 
- éŸ³é¢‘è´¨é‡æ£€æŸ¥é€šè¿‡ï¼ˆRMS=0.0760, std=0.0760, dynamic_range=0.4436ï¼‰
- ä½†ASR workerå¤„ç†åè¿”å›0ä¸ªsegmentsï¼ˆç©ºæ–‡æœ¬ï¼‰
- å¤„ç†æ—¶é—´ï¼š2.15ç§’å¤„ç†0.24ç§’éŸ³é¢‘ï¼ˆ8.95å€ï¼‰

#### Job-D6A0E6E9 âœ… éŸ³é¢‘è´¨é‡é€šè¿‡ï¼Œä½†ASRè¿”å›ç©ºæ–‡æœ¬

```
07:53:29,180 - Audio data validation: rms=0.0358, std=0.0358, dynamic_range=0.4326, duration=0.240s
07:53:29,180 - Submitting ASR task to worker process âœ…
07:53:30,798 - ASR Worker: Converted segments to list (took 1.613s, count=0) âŒ
07:53:30,798 - Task completed successfully, text_len=0 âŒ
```

#### Job-CDEA69AC âœ… éŸ³é¢‘è´¨é‡é€šè¿‡ï¼Œä½†ASRè¿”å›ç©ºæ–‡æœ¬

```
07:53:36,657 - Audio data validation: rms=0.0487, std=0.0487, dynamic_range=0.3624, duration=0.240s
07:53:36,657 - Submitting ASR task to worker process âœ…
07:53:37,026 - ASR Worker: Converted segments to list (took 0.365s, count=0) âŒ
07:53:37,027 - Task completed successfully, text_len=0 âŒ
```

#### å…¶ä»–Job âŒ éŸ³é¢‘è´¨é‡æ£€æŸ¥å¤±è´¥

- `job-13CB4413`: RMS=0.0006 < 0.005ï¼ˆè¢«è¿‡æ»¤ï¼‰
- `job-53EAE321`: RMS=0.0009 < 0.005ï¼ˆè¢«è¿‡æ»¤ï¼‰
- `job-2F4E3B7A`: RMS=0.0028 < 0.005ï¼ˆè¢«è¿‡æ»¤ï¼‰

---

## æ ¹æœ¬åŸå› 

### é—®é¢˜1ï¼šASRè¿”å›ç©ºæ–‡æœ¬ï¼ˆå³ä½¿éŸ³é¢‘è´¨é‡é€šè¿‡ï¼‰

**ç°è±¡**:
- éŸ³é¢‘è´¨é‡æ£€æŸ¥é€šè¿‡ï¼ˆRMSã€stdã€dynamic_rangeéƒ½æ»¡è¶³é˜ˆå€¼ï¼‰
- ASR workerå¤„ç†å®Œæˆï¼Œä½†`segments=0`ï¼ˆç©ºæ–‡æœ¬ï¼‰

**å¯èƒ½åŸå› **:
1. **éŸ³é¢‘å¤ªçŸ­ï¼ˆ0.24ç§’ï¼‰**: Faster Whisperå¯èƒ½æ— æ³•è¯†åˆ«è¿™ä¹ˆçŸ­çš„éŸ³é¢‘
2. **éŸ³é¢‘å†…å®¹é—®é¢˜**: å¯èƒ½æ˜¯é™éŸ³ã€å™ªéŸ³æˆ–æ— æ•ˆè¯­éŸ³
3. **æ¨¡å‹é…ç½®é—®é¢˜**: beam_sizeã€languageç­‰å‚æ•°å¯èƒ½ä¸é€‚åˆçŸ­éŸ³é¢‘

### é—®é¢˜2ï¼šå¤„ç†æ—¶é—´å¼‚å¸¸

**ç°è±¡**:
- `job-031EC479`: 8.69ç§’å¤„ç†0.24ç§’éŸ³é¢‘ï¼ˆ36.31å€ï¼‰
- `job-E14E2B85`: 2.15ç§’å¤„ç†0.24ç§’éŸ³é¢‘ï¼ˆ8.95å€ï¼‰
- `job-D6A0E6E9`: 1.63ç§’å¤„ç†0.24ç§’éŸ³é¢‘ï¼ˆ6.78å€ï¼‰
- `job-CDEA69AC`: 0.365ç§’å¤„ç†0.24ç§’éŸ³é¢‘ï¼ˆ1.52å€ï¼‰

**å¯èƒ½åŸå› **:
- ç¬¬ä¸€æ¬¡å¤„ç†éœ€è¦åˆå§‹åŒ–ï¼ˆ8.69ç§’ï¼‰
- åç»­å¤„ç†æ—¶é—´é€æ¸å‡å°‘ï¼ˆ2.15s â†’ 1.63s â†’ 0.365sï¼‰
- ä½†å³ä½¿æ˜¯æœ€å¿«çš„0.365ç§’ï¼Œå¯¹äº0.24ç§’éŸ³é¢‘æ¥è¯´ä»ç„¶å¾ˆé•¿

### é—®é¢˜3ï¼šæœåŠ¡å´©æºƒ

**ç°è±¡**:
- æ—¥å¿—åœ¨`job-7377CA70`å¤„æˆªæ–­
- æ²¡æœ‰çœ‹åˆ°å´©æºƒé”™è¯¯ä¿¡æ¯

**å¯èƒ½åŸå› **:
1. **Segfault**: Faster Whisperçš„Cæ‰©å±•å´©æºƒï¼ˆä½†åº”è¯¥åœ¨workerè¿›ç¨‹ä¸­ï¼Œä¸åº”è¯¥å½±å“ä¸»è¿›ç¨‹ï¼‰
2. **å†…å­˜é—®é¢˜**: å¤„ç†å¤šä¸ªjobåå†…å­˜ä¸è¶³
3. **å…¶ä»–æœªæ•è·å¼‚å¸¸**: ä¸»è¿›ç¨‹å´©æºƒ

---

## ä¿®å¤å»ºè®®

### 1. æ£€æŸ¥ASR workerè¿›ç¨‹çŠ¶æ€ âš ï¸

æŸ¥çœ‹æ˜¯å¦æœ‰watchdogé‡å¯workerè¿›ç¨‹çš„æ—¥å¿—ï¼Œç¡®è®¤workeræ˜¯å¦å´©æºƒã€‚

### 2. é™ä½éŸ³é¢‘è´¨é‡é˜ˆå€¼ï¼ˆä¸´æ—¶ï¼‰âš ï¸

å½“å‰é˜ˆå€¼å¯èƒ½å¤ªä¸¥æ ¼ï¼Œå¯¼è‡´æœ‰æ•ˆè¯­éŸ³è¢«è¿‡æ»¤ï¼š
- `MIN_AUDIO_RMS`: 0.005 â†’ 0.001
- `MIN_AUDIO_STD`: 0.01 â†’ 0.002
- `MIN_AUDIO_DYNAMIC_RANGE`: 0.02 â†’ 0.005

### 3. å¢åŠ æœ€çŸ­éŸ³é¢‘æ—¶é•¿æ£€æŸ¥ âš ï¸

å¦‚æœéŸ³é¢‘å¤ªçŸ­ï¼ˆ< 0.5ç§’ï¼‰ï¼Œå¯èƒ½æ— æ³•è¢«æ­£ç¡®è¯†åˆ«ï¼š
- æ·»åŠ `MIN_AUDIO_DURATION_FOR_ASR`: 0.5ç§’
- çŸ­äº0.5ç§’çš„éŸ³é¢‘ç›´æ¥è¿”å›ç©ºæ–‡æœ¬ï¼Œä¸è¿›å…¥ASR

### 4. å¢å¼ºå´©æºƒæ—¥å¿— âš ï¸

åœ¨ä¸»è¿›ç¨‹ä¸­æ·»åŠ æ›´è¯¦ç»†çš„å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•ï¼Œç‰¹åˆ«æ˜¯ï¼š
- `list(segments)`è½¬æ¢æ—¶çš„å¼‚å¸¸
- Workerè¿›ç¨‹å´©æºƒæ—¶çš„è¯¦ç»†ä¿¡æ¯
- å†…å­˜ä½¿ç”¨æƒ…å†µ

### 5. æ£€æŸ¥Faster Whisperé…ç½® âš ï¸

å¯¹äºçŸ­éŸ³é¢‘ï¼ˆ0.24ç§’ï¼‰ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´ï¼š
- `beam_size`: 5 â†’ 1ï¼ˆå‡å°‘è®¡ç®—é‡ï¼‰
- `vad_filter`: å¯èƒ½éœ€è¦ç¦ç”¨æˆ–è°ƒæ•´
- `condition_on_previous_text`: Falseï¼ˆçŸ­éŸ³é¢‘ä¸éœ€è¦ä¸Šä¸‹æ–‡ï¼‰

---

## ä¸‹ä¸€æ­¥

1. âœ… **æ£€æŸ¥watchdogæ—¥å¿—**: ç¡®è®¤workerè¿›ç¨‹æ˜¯å¦å´©æºƒ
2. âš ï¸ **è°ƒæ•´éŸ³é¢‘è´¨é‡é˜ˆå€¼**: é™ä½é˜ˆå€¼ï¼Œå…è®¸æ›´å¤šéŸ³é¢‘é€šè¿‡
3. âš ï¸ **å¢åŠ æœ€çŸ­éŸ³é¢‘æ—¶é•¿æ£€æŸ¥**: è¿‡æ»¤å¤ªçŸ­çš„éŸ³é¢‘
4. âš ï¸ **å¢å¼ºå´©æºƒæ—¥å¿—**: æ•è·æ›´å¤šå¼‚å¸¸ä¿¡æ¯
5. âš ï¸ **ä¼˜åŒ–Faster Whisperé…ç½®**: é’ˆå¯¹çŸ­éŸ³é¢‘ä¼˜åŒ–

---

**åˆ†æå®Œæˆæ—¶é—´**: 2025-12-25  
**çŠ¶æ€**: ğŸ” **é—®é¢˜å·²å®šä½ï¼šASRè¿”å›ç©ºæ–‡æœ¬ï¼ŒæœåŠ¡å¯èƒ½å´©æºƒ**

