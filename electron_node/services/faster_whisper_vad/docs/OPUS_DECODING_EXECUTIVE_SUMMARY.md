# Opus 音频解码问题 - 执行摘要

**日期**: 2025-12-24  
**问题**: Opus 音频解码方案评估  
**状态**: 待决策

---

## 核心问题

Web 客户端发送的 Opus 编码音频无法在节点端正确解码，导致 ASR 任务失败。

---

## 测试结果

| 方案 | 结果 | 说明 |
|------|------|------|
| **ffmpeg 直接解码** | ❌ 失败 | 技术不可行，ffmpeg 不支持原始 Opus 帧 |
| **opusenc + ffmpeg** | ⚠️ 未测试 | 需要额外系统依赖（opusenc 工具） |
| **pyogg 直接解码** | ⚠️ 部分失败 | 需要修复类型转换和帧边界识别问题 |

---

## 推荐方案

### ✅ 优先方案：修复 pyogg 直接解码

**优势**:
- ✅ 无需额外系统依赖
- ✅ 部署简单，用户友好
- ✅ 技术可行（已在 Rust 实现中验证）
- ✅ 实施成本低（2-3 天）

**需要修复**:
- 类型转换问题
- 帧边界识别算法优化

### ⚠️ 备选方案：opusenc + ffmpeg

**适用场景**: pyogg 方案无法稳定工作时

**问题**:
- 需要用户安装 opusenc 工具
- 增加部署复杂度

---

## 决策建议

**推荐**: 优先修复 pyogg 直接解码方案

**理由**:
1. 技术可行，风险可控
2. 用户体验好，无需额外依赖
3. 实施成本低，见效快

---

## 下一步行动

1. **技术团队**: 修复 pyogg 解码实现（预计 2-3 天）
2. **测试团队**: 进行充分测试验证
3. **文档团队**: 更新部署文档（如需要）

---

**详细报告**: 请参考 `OPUS_DECODING_ISSUE_REPORT.md`

