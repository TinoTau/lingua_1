# ä¸Šä¸‹æ–‡ç¼“å†²åŒºå’Œç©ºæ–‡æœ¬è¿‡æ»¤æ—¥å¿—æ£€æŸ¥æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£åˆ—å‡ºäº†æ‰€æœ‰ä¸ä¸Šä¸‹æ–‡ç¼“å†²åŒºå’Œç©ºæ–‡æœ¬è¿‡æ»¤ç›¸å…³çš„æ—¥å¿—è¾“å‡ºï¼Œç”¨äºéªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

## 1. ä¸Šä¸‹æ–‡ç¼“å†²åŒºæ—¥å¿—

### 1.1 å‰ç½®ä¸Šä¸‹æ–‡éŸ³é¢‘ï¼ˆASRå¤„ç†å‰ï¼‰

**ä½ç½®**: `src/inference.rs:348-372`

#### æƒ…å†µ1: ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ä¸ºç©ºï¼ˆæ­£å¸¸æƒ…å†µï¼‰

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO âœ… å‰ç½®ä¸Šä¸‹æ–‡éŸ³é¢‘åˆ°å½“å‰utteranceï¼ˆä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ä¸ºç©ºï¼‰ trace_id=xxx context_samples=32000 context_duration_sec=2.0 original_samples=48000 original_duration_sec=3.0 total_samples=80000 total_duration_sec=5.0
```

**å­—æ®µè¯´æ˜**:
- `context_samples`: ä¸Šä¸‹æ–‡éŸ³é¢‘çš„æ ·æœ¬æ•°ï¼ˆåº”è¯¥ > 0ï¼‰
- `context_duration_sec`: ä¸Šä¸‹æ–‡éŸ³é¢‘çš„æ—¶é•¿ï¼ˆç§’ï¼Œåº”è¯¥çº¦ç­‰äº 2.0ï¼‰
- `original_samples`: åŸå§‹éŸ³é¢‘çš„æ ·æœ¬æ•°
- `original_duration_sec`: åŸå§‹éŸ³é¢‘çš„æ—¶é•¿ï¼ˆç§’ï¼‰
- `total_samples`: åˆå¹¶åçš„æ€»æ ·æœ¬æ•°
- `total_duration_sec`: åˆå¹¶åçš„æ€»æ—¶é•¿ï¼ˆç§’ï¼‰

**éªŒè¯ç‚¹**:
- âœ… `context_samples > 0` è¡¨ç¤ºä¸Šä¸‹æ–‡ç¼“å†²åŒºæœ‰å†…å®¹
- âœ… `total_samples = context_samples + original_samples`

#### æƒ…å†µ2: ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ºç©ºï¼ˆç¬¬ä¸€ä¸ªutteranceï¼‰

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO â„¹ï¸ ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ºç©ºï¼Œä½¿ç”¨åŸå§‹éŸ³é¢‘ï¼ˆç¬¬ä¸€ä¸ªutteranceæˆ–ä¸Šä¸‹æ–‡å·²æ¸…ç©ºï¼‰ trace_id=xxx original_samples=48000 original_duration_sec=3.0
```

**éªŒè¯ç‚¹**:
- âœ… ç¬¬ä¸€ä¸ªutteranceåº”è¯¥çœ‹åˆ°æ­¤æ—¥å¿—
- âœ… æ¸…ç©ºä¸Šä¸‹æ–‡ç¼“å†²åŒºåï¼Œä¸‹ä¸€ä¸ªutteranceä¹Ÿåº”è¯¥çœ‹åˆ°æ­¤æ—¥å¿—

### 1.2 æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆASRå¤„ç†åï¼‰

**ä½ç½®**: `src/inference.rs:479-571`

#### æƒ…å†µ1: ä½¿ç”¨VADé€‰æ‹©æœ€ä½³ç‰‡æ®µï¼ˆæ­£å¸¸æƒ…å†µï¼‰

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO âœ… æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆä½¿ç”¨VADé€‰æ‹©çš„æœ€åä¸€ä¸ªè¯­éŸ³æ®µå°¾éƒ¨ï¼‰ trace_id=xxx context_samples=32000 context_duration_sec=2.0 segment_start=16000 segment_end=48000 segment_samples=32000
```

**å­—æ®µè¯´æ˜**:
- `segment_start`: è¯­éŸ³æ®µçš„èµ·å§‹ä½ç½®ï¼ˆæ ·æœ¬ç´¢å¼•ï¼‰
- `segment_end`: è¯­éŸ³æ®µçš„ç»“æŸä½ç½®ï¼ˆæ ·æœ¬ç´¢å¼•ï¼‰
- `segment_samples`: è¯­éŸ³æ®µçš„æ ·æœ¬æ•°

**éªŒè¯ç‚¹**:
- âœ… `context_samples` åº”è¯¥çº¦ç­‰äº 32000ï¼ˆ2ç§’ @ 16kHzï¼‰
- âœ… `segment_end - segment_start = segment_samples`

#### æƒ…å†µ2: è¯­éŸ³æ®µè¾ƒçŸ­ï¼Œä¿å­˜å…¨éƒ¨

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO âœ… æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆæœ€åä¸€ä¸ªè¯­éŸ³æ®µè¾ƒçŸ­ï¼Œä¿å­˜å…¨éƒ¨ï¼‰ trace_id=xxx context_samples=16000 context_duration_sec=1.0 segment_samples=16000
```

**éªŒè¯ç‚¹**:
- âœ… `context_samples = segment_samples`ï¼ˆå› ä¸ºæ®µå¤ªçŸ­ï¼Œä¿å­˜å…¨éƒ¨ï¼‰

#### æƒ…å†µ3: VADæœªæ£€æµ‹åˆ°è¯­éŸ³æ®µï¼ˆå›é€€ï¼‰

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO âš ï¸ æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆVADæœªæ£€æµ‹åˆ°è¯­éŸ³æ®µï¼Œä¿å­˜æœ€å2ç§’ï¼‰ trace_id=xxx context_samples=32000 context_duration_sec=2.0 original_samples=48000
```

**éªŒè¯ç‚¹**:
- âœ… å½“VADæœªæ£€æµ‹åˆ°è¯­éŸ³æ®µæ—¶ï¼Œå›é€€åˆ°ç®€å•å°¾éƒ¨ä¿å­˜
- âœ… `context_samples` åº”è¯¥çº¦ç­‰äº 32000ï¼ˆ2ç§’ï¼‰

#### æƒ…å†µ4: Utteranceè¾ƒçŸ­ï¼Œä¿å­˜å…¨éƒ¨

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO âš ï¸ æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆutteranceè¾ƒçŸ­ï¼Œä¿å­˜å…¨éƒ¨ï¼‰ trace_id=xxx context_samples=8000 context_duration_sec=0.5 original_samples=8000
```

**éªŒè¯ç‚¹**:
- âœ… å½“utterance < 2ç§’æ—¶ï¼Œä¿å­˜å…¨éƒ¨éŸ³é¢‘

#### æƒ…å†µ5: VADæ£€æµ‹å¤±è´¥ï¼ˆé”™è¯¯å›é€€ï¼‰

**æ—¥å¿—çº§åˆ«**: `WARN` + `INFO`

**æ—¥å¿—è¾“å‡º**:
```
WARN VADæ£€æµ‹å¤±è´¥ï¼Œä½¿ç”¨ç®€å•å°¾éƒ¨ä¿å­˜ä¸Šä¸‹æ–‡ trace_id=xxx error=...
INFO âš ï¸ æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆVADå¤±è´¥å›é€€ï¼Œä¿å­˜æœ€å2ç§’ï¼‰ trace_id=xxx context_samples=32000 context_duration_sec=2.0
```

**éªŒè¯ç‚¹**:
- âš ï¸ å½“VADæ£€æµ‹å¤±è´¥æ—¶ï¼Œä¼šå›é€€åˆ°ç®€å•å°¾éƒ¨ä¿å­˜
- âš ï¸ åº”è¯¥æ£€æŸ¥VADå¤±è´¥çš„åŸå› 

### 1.3 æ¸…ç©ºä¸Šä¸‹æ–‡ç¼“å†²åŒº

**ä½ç½®**: `src/inference.rs:227-235`

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO ğŸ—‘ï¸ ä¸Šä¸‹æ–‡ç¼“å†²åŒºå’ŒVADçŠ¶æ€å·²æ¸…ç©º previous_context_samples=32000 previous_context_duration_sec=2.0
```

**å­—æ®µè¯´æ˜**:
- `previous_context_samples`: æ¸…ç©ºå‰ä¸Šä¸‹æ–‡ç¼“å†²åŒºçš„æ ·æœ¬æ•°
- `previous_context_duration_sec`: æ¸…ç©ºå‰ä¸Šä¸‹æ–‡ç¼“å†²åŒºçš„æ—¶é•¿ï¼ˆç§’ï¼‰

**éªŒè¯ç‚¹**:
- âœ… æ¸…ç©ºåï¼Œä¸‹ä¸€ä¸ªutteranceåº”è¯¥çœ‹åˆ°"ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ºç©º"çš„æ—¥å¿—

## 2. ç©ºæ–‡æœ¬è¿‡æ»¤æ—¥å¿—

### 2.1 ASRè¯†åˆ«å®Œæˆ

**ä½ç½®**: `src/inference.rs:573-584`

**æ—¥å¿—çº§åˆ«**: `INFO`

**æ—¥å¿—è¾“å‡º**:
```
INFO âœ… ASR è¯†åˆ«å®Œæˆ trace_id=xxx transcript_len=45 transcript_preview="æŠŠè¿™äº›æ–‡æœ¬éƒ½æ˜¾ç¤ºåœ¨ä¸€ä¸ªèŠå¤©æ¡†é‡Œï¼Œç„¶åéšç€æˆ‘ä»¬çš„è¯­éŸ³ç»“æœ" transcript_trimmed_len=45
```

**å­—æ®µè¯´æ˜**:
- `transcript_len`: åŸå§‹è¯†åˆ«æ–‡æœ¬çš„é•¿åº¦ï¼ˆåŒ…æ‹¬å‰åç©ºç™½ï¼‰
- `transcript_preview`: è¯†åˆ«æ–‡æœ¬çš„å‰50ä¸ªå­—ç¬¦
- `transcript_trimmed_len`: å»é™¤å‰åç©ºç™½åçš„é•¿åº¦

**éªŒè¯ç‚¹**:
- âœ… æ‰€æœ‰ASRè¯†åˆ«å®Œæˆåéƒ½åº”è¯¥çœ‹åˆ°æ­¤æ—¥å¿—
- âœ… `transcript_trimmed_len` åº”è¯¥ <= `transcript_len`

### 2.2 ç©ºæ–‡æœ¬æ£€æŸ¥ï¼ˆè·³è¿‡ç¿»è¯‘å’ŒTTSï¼‰

**ä½ç½®**: `src/inference.rs:629-644`

**æ—¥å¿—çº§åˆ«**: `WARN`

**æ—¥å¿—è¾“å‡º**:
```
WARN ASR transcript is empty, skipping NMT and TTS trace_id=xxx transcript=""
```

**éªŒè¯ç‚¹**:
- âš ï¸ å½“ASRè¯†åˆ«ç»“æœä¸ºç©ºæ—¶ï¼Œåº”è¯¥çœ‹åˆ°æ­¤æ—¥å¿—
- âš ï¸ ä¸åº”è¯¥çœ‹åˆ°åç»­çš„"å¼€å§‹æœºå™¨ç¿»è¯‘"å’Œ"å¼€å§‹è¯­éŸ³åˆæˆ"æ—¥å¿—

### 2.3 æ— æ„ä¹‰æ–‡æœ¬æ£€æŸ¥ï¼ˆè·³è¿‡ç¿»è¯‘å’ŒTTSï¼‰

**ä½ç½®**: `src/inference.rs:648-664`

**æ—¥å¿—çº§åˆ«**: `WARN`

**æ—¥å¿—è¾“å‡º**:
```
WARN ASR transcript is meaningless (likely silence misrecognition), skipping NMT and TTS trace_id=xxx transcript="The" transcript_len=3
```

**å­—æ®µè¯´æ˜**:
- `transcript`: è¢«è¯†åˆ«ä¸ºæ— æ„ä¹‰çš„æ–‡æœ¬å†…å®¹
- `transcript_len`: æ–‡æœ¬é•¿åº¦

**éªŒè¯ç‚¹**:
- âš ï¸ å½“ASRè¯†åˆ«ç»“æœä¸ºæ— æ„ä¹‰æ–‡æœ¬æ—¶ï¼Œåº”è¯¥çœ‹åˆ°æ­¤æ—¥å¿—
- âš ï¸ ä¸åº”è¯¥çœ‹åˆ°åç»­çš„"å¼€å§‹æœºå™¨ç¿»è¯‘"å’Œ"å¼€å§‹è¯­éŸ³åˆæˆ"æ—¥å¿—
- âš ï¸ å¸¸è§çš„æ— æ„ä¹‰æ–‡æœ¬åŒ…æ‹¬ï¼šå•ä¸ªè¯­æ°”è¯ã€åŒ…å«æ‹¬å·çš„æ–‡æœ¬ã€è§†é¢‘ç»“å°¾å­—å¹•ç­‰

### 2.4 åŒ…å«æ‹¬å·çš„æ–‡æœ¬è­¦å‘Š

**ä½ç½®**: `src/inference.rs:575-581`

**æ—¥å¿—çº§åˆ«**: `WARN`

**æ—¥å¿—è¾“å‡º**:
```
WARN âš ï¸ [ASR Filter Check] Transcript contains brackets before setting to context! trace_id=xxx transcript="(ç¬‘)" transcript_len=3
```

**éªŒè¯ç‚¹**:
- âš ï¸ å¦‚æœASRè¯†åˆ«ç»“æœåŒ…å«æ‹¬å·ï¼Œåº”è¯¥çœ‹åˆ°æ­¤è­¦å‘Š
- âš ï¸ ä½†æ–‡æœ¬å¯èƒ½å·²ç»è¢«è¿‡æ»¤ï¼Œä¸ä¼šè¿›å…¥ç¿»è¯‘é˜¶æ®µ

## 3. æ—¥å¿—éªŒè¯æ£€æŸ¥æ¸…å•

### ä¸Šä¸‹æ–‡ç¼“å†²åŒºéªŒè¯

- [ ] **ç¬¬ä¸€ä¸ªutterance**: åº”è¯¥çœ‹åˆ°"ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ºç©º"çš„æ—¥å¿—
- [ ] **åç»­utterance**: åº”è¯¥çœ‹åˆ°"å‰ç½®ä¸Šä¸‹æ–‡éŸ³é¢‘åˆ°å½“å‰utterance"çš„æ—¥å¿—ï¼Œä¸” `context_samples > 0`
- [ ] **æ›´æ–°ä¸Šä¸‹æ–‡**: æ¯æ¬¡å¤„ç†å®Œæˆåï¼Œåº”è¯¥çœ‹åˆ°"æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒº"çš„æ—¥å¿—
- [ ] **æ¸…ç©ºä¸Šä¸‹æ–‡**: æ¸…ç©ºååº”è¯¥çœ‹åˆ°"ä¸Šä¸‹æ–‡ç¼“å†²åŒºå’ŒVADçŠ¶æ€å·²æ¸…ç©º"çš„æ—¥å¿—

### ç©ºæ–‡æœ¬è¿‡æ»¤éªŒè¯

- [ ] **ASRè¯†åˆ«å®Œæˆ**: æ¯æ¬¡ASRè¯†åˆ«åéƒ½åº”è¯¥çœ‹åˆ°"ASR è¯†åˆ«å®Œæˆ"çš„æ—¥å¿—
- [ ] **ç©ºæ–‡æœ¬è·³è¿‡**: å¦‚æœè¯†åˆ«ç»“æœä¸ºç©ºï¼Œåº”è¯¥çœ‹åˆ°"ASR transcript is empty"çš„è­¦å‘Šï¼Œä¸”ä¸åº”è¯¥çœ‹åˆ°ç¿»è¯‘å’ŒTTSæ—¥å¿—
- [ ] **æ— æ„ä¹‰æ–‡æœ¬è·³è¿‡**: å¦‚æœè¯†åˆ«ç»“æœä¸ºæ— æ„ä¹‰æ–‡æœ¬ï¼Œåº”è¯¥çœ‹åˆ°"ASR transcript is meaningless"çš„è­¦å‘Šï¼Œä¸”ä¸åº”è¯¥çœ‹åˆ°ç¿»è¯‘å’ŒTTSæ—¥å¿—
- [ ] **æ­£å¸¸æ–‡æœ¬**: å¦‚æœè¯†åˆ«ç»“æœä¸ºæ­£å¸¸æ–‡æœ¬ï¼Œåº”è¯¥çœ‹åˆ°"å¼€å§‹æœºå™¨ç¿»è¯‘"å’Œ"å¼€å§‹è¯­éŸ³åˆæˆ"çš„æ—¥å¿—

## 4. å¦‚ä½•æŸ¥çœ‹æ—¥å¿—

### æ–¹æ³•1: è®¾ç½®æ—¥å¿—çº§åˆ«

```bash
# è®¾ç½®ä¸º INFO çº§åˆ«ï¼ˆä¼šæ˜¾ç¤ºæ‰€æœ‰ä¸Šä¸‹æ–‡ç¼“å†²åŒºå’Œç©ºæ–‡æœ¬è¿‡æ»¤æ—¥å¿—ï¼‰
RUST_LOG=info ./node-inference

# æˆ–æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
RUST_LOG=debug ./node-inference
```

### æ–¹æ³•2: æœç´¢å…³é”®å­—

```bash
# æœç´¢ä¸Šä¸‹æ–‡ç¼“å†²åŒºç›¸å…³æ—¥å¿—
grep -E "å‰ç½®ä¸Šä¸‹æ–‡|æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒº|ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ºç©º|ä¸Šä¸‹æ–‡ç¼“å†²åŒºå’ŒVADçŠ¶æ€å·²æ¸…ç©º" node-inference.log

# æœç´¢ç©ºæ–‡æœ¬è¿‡æ»¤ç›¸å…³æ—¥å¿—
grep -E "ASR transcript is empty|ASR transcript is meaningless|ASR è¯†åˆ«å®Œæˆ" node-inference.log
```

### æ–¹æ³•3: ä½¿ç”¨ trace_id è¿½è¸ª

```bash
# æœç´¢ç‰¹å®š trace_id çš„æ‰€æœ‰ç›¸å…³æ—¥å¿—
grep "trace_id=xxx" node-inference.log | grep -E "å‰ç½®ä¸Šä¸‹æ–‡|æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒº|ASR transcript|ASR è¯†åˆ«å®Œæˆ"
```

## 5. å¸¸è§é—®é¢˜æ’æŸ¥

### Q: ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°"å‰ç½®ä¸Šä¸‹æ–‡éŸ³é¢‘"çš„æ—¥å¿—ï¼Ÿ

**å¯èƒ½åŸå› **:
1. ä¸Šä¸‹æ–‡ç¼“å†²åŒºå§‹ç»ˆä¸ºç©ºï¼ˆæ£€æŸ¥"æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒº"çš„æ—¥å¿—ï¼‰
2. æ¯æ¬¡å¤„ç†å‰ä¸Šä¸‹æ–‡éƒ½è¢«æ¸…ç©ºäº†ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰"æ¸…ç©ºä¸Šä¸‹æ–‡ç¼“å†²åŒº"çš„æ—¥å¿—ï¼‰
3. æ—¥å¿—çº§åˆ«è®¾ç½®ä¸æ­£ç¡®ï¼ˆç¡®ä¿è®¾ç½®ä¸º `INFO` æˆ– `DEBUG`ï¼‰

### Q: ä¸ºä»€ä¹ˆç©ºæ–‡æœ¬ä»ç„¶è¢«ç¿»è¯‘äº†ï¼Ÿ

**å¯èƒ½åŸå› **:
1. æ–‡æœ¬ä¸æ˜¯å®Œå…¨ä¸ºç©ºï¼Œè€Œæ˜¯åŒ…å«ç©ºç™½å­—ç¬¦ï¼ˆæ£€æŸ¥ `transcript_trimmed_len`ï¼‰
2. æ–‡æœ¬è¢«è¯†åˆ«ä¸ºæœ‰æ„ä¹‰ï¼ˆæ£€æŸ¥ `is_meaningless_transcript` å‡½æ•°çš„å®ç°ï¼‰
3. æ—¥å¿—çº§åˆ«è®¾ç½®ä¸æ­£ç¡®ï¼Œçœ‹ä¸åˆ°è­¦å‘Šæ—¥å¿—

### Q: ä¸Šä¸‹æ–‡ç¼“å†²åŒºå¤§å°ä¸æ­£ç¡®ï¼Ÿ

**æ£€æŸ¥ç‚¹**:
1. æŸ¥çœ‹"æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒº"çš„æ—¥å¿—ï¼Œç¡®è®¤ `context_samples` çš„å€¼
2. æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥æ˜¯ 32000 æ ·æœ¬ï¼ˆ2ç§’ @ 16kHzï¼‰
3. å¦‚æœutteranceè¾ƒçŸ­ï¼Œå¯èƒ½ä¼šä¿å­˜å…¨éƒ¨éŸ³é¢‘

## 6. æ—¥å¿—è¾“å‡ºç¤ºä¾‹

### å®Œæ•´çš„å¤„ç†æµç¨‹ï¼ˆæ­£å¸¸æƒ…å†µï¼‰

```
INFO âœ… å‰ç½®ä¸Šä¸‹æ–‡éŸ³é¢‘åˆ°å½“å‰utteranceï¼ˆä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ä¸ºç©ºï¼‰ trace_id=abc123 context_samples=32000 context_duration_sec=2.0 original_samples=48000 original_duration_sec=3.0 total_samples=80000 total_duration_sec=5.0
INFO VADæ£€æµ‹åˆ°1ä¸ªè¯­éŸ³æ®µï¼Œå·²æå–æœ‰æ•ˆè¯­éŸ³ segments_count=1 original_samples=80000 processed_samples=48000 trace_id=abc123
INFO âœ… ASR è¯†åˆ«å®Œæˆ trace_id=abc123 transcript_len=45 transcript_preview="æŠŠè¿™äº›æ–‡æœ¬éƒ½æ˜¾ç¤ºåœ¨ä¸€ä¸ªèŠå¤©æ¡†é‡Œï¼Œç„¶åéšç€æˆ‘ä»¬çš„è¯­éŸ³ç»“æœ" transcript_trimmed_len=45
INFO âœ… æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆä½¿ç”¨VADé€‰æ‹©çš„æœ€åä¸€ä¸ªè¯­éŸ³æ®µå°¾éƒ¨ï¼‰ trace_id=abc123 context_samples=32000 context_duration_sec=2.0 segment_start=16000 segment_end=48000 segment_samples=32000
DEBUG å¼€å§‹æœºå™¨ç¿»è¯‘ trace_id=abc123 src_lang=zh tgt_lang=en
INFO æœºå™¨ç¿»è¯‘å®Œæˆ trace_id=abc123 translation_len=52
DEBUG å¼€å§‹è¯­éŸ³åˆæˆ trace_id=abc123 tgt_lang=en
INFO è¯­éŸ³åˆæˆå®Œæˆ trace_id=abc123 audio_len=64000
```

### ç©ºæ–‡æœ¬è·³è¿‡çš„æƒ…å†µ

```
INFO â„¹ï¸ ä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ºç©ºï¼Œä½¿ç”¨åŸå§‹éŸ³é¢‘ï¼ˆç¬¬ä¸€ä¸ªutteranceæˆ–ä¸Šä¸‹æ–‡å·²æ¸…ç©ºï¼‰ trace_id=abc123 original_samples=48000 original_duration_sec=3.0
INFO VADæ£€æµ‹åˆ°1ä¸ªè¯­éŸ³æ®µï¼Œå·²æå–æœ‰æ•ˆè¯­éŸ³ segments_count=1 original_samples=48000 processed_samples=32000 trace_id=abc123
INFO âœ… ASR è¯†åˆ«å®Œæˆ trace_id=abc123 transcript_len=0 transcript_preview="" transcript_trimmed_len=0
WARN ASR transcript is empty, skipping NMT and TTS trace_id=abc123 transcript=""
INFO âœ… æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆä½¿ç”¨VADé€‰æ‹©çš„æœ€åä¸€ä¸ªè¯­éŸ³æ®µå°¾éƒ¨ï¼‰ trace_id=abc123 context_samples=32000 context_duration_sec=2.0
```

### æ— æ„ä¹‰æ–‡æœ¬è·³è¿‡çš„æƒ…å†µ

```
INFO âœ… å‰ç½®ä¸Šä¸‹æ–‡éŸ³é¢‘åˆ°å½“å‰utteranceï¼ˆä¸Šä¸‹æ–‡ç¼“å†²åŒºä¸ä¸ºç©ºï¼‰ trace_id=abc123 context_samples=32000 context_duration_sec=2.0 original_samples=48000 original_duration_sec=3.0 total_samples=80000 total_duration_sec=5.0
INFO VADæ£€æµ‹åˆ°1ä¸ªè¯­éŸ³æ®µï¼Œå·²æå–æœ‰æ•ˆè¯­éŸ³ segments_count=1 original_samples=80000 processed_samples=48000 trace_id=abc123
INFO âœ… ASR è¯†åˆ«å®Œæˆ trace_id=abc123 transcript_len=3 transcript_preview="The" transcript_trimmed_len=3
WARN ASR transcript is meaningless (likely silence misrecognition), skipping NMT and TTS trace_id=abc123 transcript="The" transcript_len=3
INFO âœ… æ›´æ–°ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼ˆä½¿ç”¨VADé€‰æ‹©çš„æœ€åä¸€ä¸ªè¯­éŸ³æ®µå°¾éƒ¨ï¼‰ trace_id=abc123 context_samples=32000 context_duration_sec=2.0
```

## ç›¸å…³æ–‡æ¡£

- [ä¸Šä¸‹æ–‡ç¼“å†²åŒºå¯ç”¨çŠ¶æ€ç¡®è®¤](./CONTEXT_BUFFER_STATUS.md)
- [å¦‚ä½•æŸ¥çœ‹ ASR æ—¥å¿—](./HOW_TO_VIEW_ASR_LOGS.md)
- [VAD ä¸Šä¸‹æ–‡ç¼“å†²åŒºå®ç°æ–‡æ¡£](./VAD_CONTEXT_BUFFER_IMPLEMENTATION.md)

