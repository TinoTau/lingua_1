# PyTorch ç‰ˆæœ¬åˆ†æžæŠ¥å‘Š

## å½“å‰çŠ¶æ€

### å„æœåŠ¡çš„ PyTorch å®‰è£…æƒ…å†µ

| æœåŠ¡ | PyTorch ç‰ˆæœ¬ | CUDA æ”¯æŒ | è™šæ‹ŸçŽ¯å¢ƒä½ç½® |
|------|-------------|-----------|-------------|
| **NMT (nmt_m2m100)** | 2.5.1+cu121 | âœ… å·²å¯ç”¨ | `services/nmt_m2m100/venv` |
| **YourTTS** | 2.5.1+cu121 | âœ… å·²å¯ç”¨ | `services/your_tts/venv` |
| **Speaker Embedding** | 2.5.1+cu121 | âœ… å·²å¯ç”¨ | `services/speaker_embedding/venv` |

## æž¶æž„è®¾è®¡è¯´æ˜Ž

### 1. ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒ

**æ¯ä¸ªæœåŠ¡éƒ½æœ‰ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒï¼ˆvenvï¼‰**ï¼Œè¿™æ˜¯å½“å‰ç³»ç»Ÿçš„æž¶æž„è®¾è®¡ï¼š

```
electron_node/services/
â”œâ”€â”€ nmt_m2m100/
â”‚   â””â”€â”€ venv/          # ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒ
â”œâ”€â”€ your_tts/
â”‚   â””â”€â”€ venv/          # ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒ
â”œâ”€â”€ speaker_embedding/
â”‚   â””â”€â”€ venv/          # ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒ
â””â”€â”€ faster_whisper_vad/
    â””â”€â”€ venv/          # ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒ
```

### 2. ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

**ä¼˜ç‚¹**ï¼š
- âœ… **ä¾èµ–éš”ç¦»**ï¼šæ¯ä¸ªæœåŠ¡å¯ä»¥æœ‰ä¸åŒçš„ä¾èµ–ç‰ˆæœ¬ï¼Œä¸ä¼šç›¸äº’å†²çª
- âœ… **ç¨³å®šæ€§**ï¼šä¸€ä¸ªæœåŠ¡çš„ä¾èµ–æ›´æ–°ä¸ä¼šå½±å“å…¶ä»–æœåŠ¡
- âœ… **æ˜“äºŽç®¡ç†**ï¼šæ¯ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹å‡çº§æˆ–å›žé€€ä¾èµ–
- âœ… **æ•…éšœéš”ç¦»**ï¼šä¸€ä¸ªæœåŠ¡çš„çŽ¯å¢ƒé—®é¢˜ä¸ä¼šå½±å“å…¶ä»–æœåŠ¡

**ç¼ºç‚¹**ï¼š
- âŒ **ç£ç›˜å ç”¨**ï¼šæ¯ä¸ªæœåŠ¡éƒ½éœ€è¦å®‰è£… PyTorchï¼ˆçº¦ 2-3GB/æœåŠ¡ï¼‰
- âŒ **é‡å¤å®‰è£…**ï¼šç›¸åŒç‰ˆæœ¬çš„åº“ä¼šè¢«å¤šæ¬¡å®‰è£…

### 3. ç‰ˆæœ¬å†²çªé—®é¢˜

**ä¸ä¼šå†²çªï¼** åŽŸå› ï¼š

1. **å®Œå…¨éš”ç¦»**ï¼šæ¯ä¸ªæœåŠ¡çš„è™šæ‹ŸçŽ¯å¢ƒæ˜¯ç‹¬ç«‹çš„ï¼ŒPython è§£é‡Šå™¨å’Œæ‰€æœ‰åº“éƒ½æ˜¯ç‹¬ç«‹çš„
2. **ç‰ˆæœ¬ä¸€è‡´**ï¼šå½“å‰æ‰€æœ‰æœåŠ¡éƒ½ä½¿ç”¨ç›¸åŒçš„ PyTorch ç‰ˆæœ¬ï¼ˆ2.5.1+cu121ï¼‰ï¼Œå³ä½¿ç‰ˆæœ¬ä¸åŒä¹Ÿä¸ä¼šå†²çª
3. **è¿è¡Œæ—¶éš”ç¦»**ï¼šæ¯ä¸ªæœåŠ¡è¿›ç¨‹ä½¿ç”¨è‡ªå·±çš„è™šæ‹ŸçŽ¯å¢ƒï¼Œäº’ä¸å¹²æ‰°

## ä¼˜åŒ–å»ºè®®

### æ–¹æ¡ˆ 1ï¼šä¿æŒçŽ°çŠ¶ï¼ˆæŽ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- æœ€ç®€å•ã€æœ€å®‰å…¨
- å®Œå…¨éš”ç¦»ï¼Œæ— å†²çªé£Žé™©
- æ˜“äºŽç»´æŠ¤å’Œè°ƒè¯•

**ç¼ºç‚¹**ï¼š
- ç£ç›˜å ç”¨è¾ƒå¤§ï¼ˆçº¦ 6-9GB ç”¨äºŽ PyTorchï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- ç£ç›˜ç©ºé—´å……è¶³
- éœ€è¦æœåŠ¡é—´å®Œå…¨éš”ç¦»
- ä¸åŒæœåŠ¡å¯èƒ½éœ€è¦ä¸åŒç‰ˆæœ¬çš„ä¾èµ–

### æ–¹æ¡ˆ 2ï¼šå…±äº«è™šæ‹ŸçŽ¯å¢ƒï¼ˆä¸æŽ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- èŠ‚çœç£ç›˜ç©ºé—´ï¼ˆåªéœ€å®‰è£…ä¸€æ¬¡ PyTorchï¼‰

**ç¼ºç‚¹**ï¼š
- âŒ **ä¾èµ–å†²çªé£Žé™©**ï¼šä¸åŒæœåŠ¡å¯èƒ½éœ€è¦ä¸åŒç‰ˆæœ¬çš„ä¾èµ–
- âŒ **æ›´æ–°é£Žé™©**ï¼šæ›´æ–°ä¸€ä¸ªæœåŠ¡çš„ä¾èµ–å¯èƒ½ç ´åå…¶ä»–æœåŠ¡
- âŒ **è°ƒè¯•å›°éš¾**ï¼šé—®é¢˜å®šä½æ›´å¤æ‚

**ç¤ºä¾‹é—®é¢˜**ï¼š
- NMT éœ€è¦ `transformers>=4.35.0,<4.50.0`
- YourTTS éœ€è¦ `transformers>=4.21.0,<=4.42.4`
- è¿™ä¸¤ä¸ªç‰ˆæœ¬èŒƒå›´æœ‰å†²çªï¼

### æ–¹æ¡ˆ 3ï¼šæ··åˆæ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰

ä¸ºæ‰€æœ‰éœ€è¦ PyTorch çš„æœåŠ¡åˆ›å»ºä¸€ä¸ªå…±äº«çš„"åŸºç¡€è™šæ‹ŸçŽ¯å¢ƒ"ï¼ŒåŒ…å«ï¼š
- PyTorch + CUDA
- å…¶ä»–é€šç”¨ä¾èµ–

ç„¶åŽæ¯ä¸ªæœåŠ¡åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ è‡ªå·±çš„ç‰¹å®šä¾èµ–ã€‚

**ç¼ºç‚¹**ï¼š
- å®žçŽ°å¤æ‚
- ä»ç„¶éœ€è¦å¤„ç†ç‰ˆæœ¬å†²çª
- ç»´æŠ¤æˆæœ¬é«˜

## å½“å‰é…ç½®æ€»ç»“

### âœ… ç‰ˆæœ¬ä¸€è‡´æ€§

æ‰€æœ‰æœåŠ¡éƒ½ä½¿ç”¨ **PyTorch 2.5.1+cu121**ï¼Œè¿™æ˜¯**å¥½äº‹**ï¼š
- ç‰ˆæœ¬ç»Ÿä¸€ï¼Œæ˜“äºŽç®¡ç†
- éƒ½æ”¯æŒ CUDA 12.1
- æ€§èƒ½ä¼˜åŒ–ä¸€è‡´

### âœ… æ— å†²çªé£Žé™©

å› ä¸ºæ¯ä¸ªæœåŠ¡éƒ½æœ‰ç‹¬ç«‹çš„è™šæ‹ŸçŽ¯å¢ƒï¼Œæ‰€ä»¥ï¼š
- **ä¸ä¼š**æœ‰ç‰ˆæœ¬å†²çª
- **ä¸ä¼š**æœ‰ä¾èµ–å†²çª
- **ä¸ä¼š**ç›¸äº’å¹²æ‰°

### ðŸ’¾ ç£ç›˜å ç”¨

å½“å‰ä¸‰ä¸ªæœåŠ¡éƒ½å®‰è£…äº† PyTorch CUDA ç‰ˆæœ¬ï¼š
- æ¯ä¸ªæœåŠ¡çº¦ 2-3GB
- æ€»è®¡çº¦ 6-9GB

è¿™æ˜¯**è®¾è®¡é€‰æ‹©**ï¼Œç”¨ç£ç›˜ç©ºé—´æ¢å–ç¨³å®šæ€§å’Œéš”ç¦»æ€§ã€‚

## ç»“è®º

**å½“å‰é…ç½®æ˜¯åˆç†çš„**ï¼š
1. âœ… ç‰ˆæœ¬ä¸ä¼šå†²çªï¼ˆå®Œå…¨éš”ç¦»ï¼‰
2. âœ… æž¶æž„è®¾è®¡åˆç†ï¼ˆæœåŠ¡éš”ç¦»ï¼‰
3. âœ… æ˜“äºŽç»´æŠ¤å’Œè°ƒè¯•
4. âš ï¸ ç£ç›˜å ç”¨è¾ƒå¤§ï¼ˆä½†è¿™æ˜¯å¯æŽ¥å—çš„æƒè¡¡ï¼‰

**å»ºè®®**ï¼šä¿æŒçŽ°çŠ¶ï¼Œä¸éœ€è¦ä¼˜åŒ–ã€‚å¦‚æžœæœªæ¥ç£ç›˜ç©ºé—´æˆä¸ºé—®é¢˜ï¼Œå†è€ƒè™‘ä¼˜åŒ–æ–¹æ¡ˆã€‚

